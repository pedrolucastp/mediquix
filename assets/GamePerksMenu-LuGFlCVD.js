import{e as a,_ as e,f as t,B as s}from"./index-cXKaoF06.js";import{H as i,c as o,L as n,w as r,j as c,g as l,F as u,s as d,k as p,b as m,t as k,e as v}from"./vue-vendor-COnmh5Ey.js";const P={hint:{id:"hint",name:"Dica",description:"Revela uma letra ou dica adicional",cost:5,icon:"lightbulb"},extra_time:{id:"extra_time",name:"Tempo Extra",description:"Adiciona 30 segundos ao tempo do jogo",cost:3,icon:"clock"},skip:{id:"skip",name:"Pular",description:"Pula para a próxima palavra/questão",cost:8,icon:"forward"}},f={WORD_FOUND:2,GAME_COMPLETION:10,PERFECT_SCORE:15,TIME_BONUS:5};function h(){const e=a();return{PERKS:P,POINTS_CONFIG:f,awardPoints:async function(a){try{return await e.addPoints(a,!0),!0}catch(t){return!1}},usePerk:async function(a){const t=P[a];if(!t)throw new Error("Invalid perk");try{return await e.usePoints(t.cost),!0}catch(s){return!1}},totalPoints:e.totalPoints}}const _={key:0,class:"perks-menu"},y={class:"perks-list"},b={class:"perk-info"},w={class:"perk-name"},E={class:"perk-cost"},T={class:"perk-tooltip"},O={key:1,class:"login-prompt"},g=e({__name:"GamePerksMenu",props:{availablePerks:{type:Array,default:()=>["hint","extra_time","skip"]}},emits:["perk-activated"],setup(e,{emit:f}){const g=e,x=f,{usePerk:A}=h(),C=a(),I=t(),j=i(new Set),D=o((()=>{const a=C.totalPoints;return g.availablePerks.map((e=>({...P[e],isDisabled:a<P[e].cost||j.value.has(e)}))).filter(Boolean)}));let F;n((()=>{F&&clearTimeout(F)}));const N=i(I.isAuthenticated);return r((()=>I.isAuthenticated),(a=>{N.value=a}),{flush:"post"}),(a,e)=>N.value?(v(),c("div",_,[l("div",y,[(v(!0),c(u,null,d(D.value,(a=>(v(),c("div",{key:a.id,class:"perk-item"},[p(s,{variant:j.value.value.has(a.id)?"accent":"outline",icon:a.icon,onClick:e=>async function(a){I.isAuthenticated&&!j.value.has(a)&&(F&&clearTimeout(F),F=setTimeout((async()=>{await A(a)&&(j.value.add(a),x("perk-activated",a),setTimeout((()=>{j.value.delete(a)}),5e3))}),300))}(a.id),disabled:a.isDisabled,class:"perk-button"},{default:m((()=>[l("div",b,[l("span",w,k(a.name),1),l("span",E,k(a.cost)+" pontos",1)])])),_:2},1032,["variant","icon","onClick","disabled"]),l("div",T,k(a.description),1)])))),128))])])):(v(),c("div",O,e[0]||(e[0]=[l("p",null,"Faça login para usar perks no jogo",-1)])))}},[["__scopeId","data-v-efd1e891"]]);export{g as G,h as u};
//# sourceMappingURL=GamePerksMenu-LuGFlCVD.js.map
