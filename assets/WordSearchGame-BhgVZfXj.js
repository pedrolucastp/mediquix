import{_ as a,r as e,v as l,c as o,x as n,a as t,d as r,f as s,l as i,e as u,g as c,h as v,i as d,k as p,p as g,q as h,t as f,T as m,y as w,F as C,j as y,z as k,n as b,B as G}from"./index-BYb6PZRb.js";import{u as S,G as P}from"./GameContainer-qHmNehOK.js";import{u as M}from"./SelectorsComponent-DJdB6c_8.js";const U={class:"game-settings"},x={class:"setting-group"},I=["value"],$={class:"setting-group"},_=["value"],z={class:"setting-group"},j=["value"],T={class:"game-content"},O={class:"word-list"},A=["title"],E={class:"game-grid-container"},N=["onClick","data-row","data-col"],W={class:"status"},F={key:0,class:"completion-message"},R=a({__name:"WordSearchGame",setup(a){const R=e(!1),D=l(),V=M(),q=o((()=>D.settings.wordSearchGame.cellSize)),L=o((()=>D.settings.wordSearchGame.gridWidth)),B=o((()=>D.settings.wordSearchGame.gridHeight)),H=o((()=>({display:"grid",gridTemplateColumns:`repeat(${B.value}, ${q.value}px)`,gridTemplateRows:`repeat(${L.value}, ${q.value}px)`,"--cell-size":`${q.value}px`,width:"fit-content",minWidth:"min-content"})));function J(a){const e=parseInt(a.target.value);e>=10&&e<=40&&(D.setWordSearchGridSize(e,B.value,q.value),ca())}function K(a){const e=parseInt(a.target.value);e>=8&&e<=20&&(D.setWordSearchGridSize(L.value,e,q.value),ca())}function Q(a){const e=parseInt(a.target.value);e>=16&&e<=40&&D.setWordSearchGridSize(L.value,B.value,e)}const X=e(null),Y=e([]),Z=e([]),aa=e([]),ea=e(0),la=e(""),oa=e([]),na=e(0),{POINTS_CONFIG:ta,awardPoints:ra}=S(),sa=o((()=>Z.value.length>0&&Z.value.every((a=>aa.value.includes(a.word.toUpperCase()))))),ia=e(!0);function ua(){ia.value=!ia.value}function ca(){ea.value=0,la.value="",oa.value=[],aa.value=[],ga=n({});const a=parseInt(B.value),e=parseInt(L.value);Y.value=Array(a).fill().map((()=>Array(e).fill("")));let l=V.words.filter((a=>a.isActive));if(l=l.filter((a=>a.word.length<=L.value&&a.word.length<=B.value)),l.length<10)return void alert("Não há palavras suficientes para iniciar o jogo. Por favor, ajuste os filtros ou adicione mais palavras que caibam na grade.");const o=Array.from(new Set(l.map((a=>a.word.toUpperCase()))));if(o.length<10)return void alert("Não há palavras únicas suficientes para iniciar o jogo. Por favor, ajuste os filtros ou adicione mais palavras.");o.sort((()=>.5-Math.random()));const t=o.slice(0,10);Z.value=t.map((a=>l.find((e=>e.word.toUpperCase()===a)))),Z.value.every((a=>function(a){const e=["horizontal","vertical","diagonal-down","diagonal-up"].filter((e=>{const l=["horizontal","diagonal-down","diagonal-up"].includes(e),o=["vertical","diagonal-down"].includes(e),n="diagonal-up"===e;return!(l&&a.length>L.value)&&(!(o&&a.length>B.value)&&!(n&&a.length>B.value))}));if(0===e.length)return!1;const l=[];for(const o of e){const e=B.value-(["vertical","diagonal-down"].includes(o)?a.length:0),n="diagonal-up"===o?a.length-1:0,t=L.value-(["horizontal","diagonal-down","diagonal-up"].includes(o)?a.length:0);for(let r=n;r<e;r++)for(let e=0;e<t;e++){const n=va(a,r,e,o);n.canPlace&&l.push({row:r,col:e,direction:o,intersections:n.intersections})}}if(l.sort(((a,e)=>e.intersections===a.intersections?Math.random()-.5:e.intersections-a.intersections)),l.length>0){const e=l[0];return function(a,e,l,o){for(let n=0;n<a.length;n++){let t=e,r=l;switch(o){case"horizontal":r+=n;break;case"vertical":t+=n;break;case"diagonal-down":t+=n,r+=n;break;case"diagonal-up":t-=n,r+=n}Y.value[t][r]=a[n]}}(a,e.row,e.col,e.direction),!0}return!1}(a.word.toUpperCase())))?function(){const a="ABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let e=0;e<B.value;e++)for(let l=0;l<L.value;l++)""===Y.value[e][l]&&(Y.value[e][l]=a.charAt(Math.floor(Math.random()*a.length)))}():ca()}function va(a,e,l,o){let n=!0,t=0;for(let r=0;r<a.length;r++){let s=e,i=l;switch(o){case"horizontal":i+=r;break;case"vertical":s+=r;break;case"diagonal-down":s+=r,i+=r;break;case"diagonal-up":s-=r,i+=r}const u=Y.value[s][i];if(""!==u){if(u!==a[r]){n=!1;break}t++}}return{canPlace:n,intersections:t}}function da(a,e){const l=`${a}-${e}`;oa.value.some((a=>a.key===l))?oa.value=oa.value.filter((a=>a.key!==l)):(oa.value.push({row:a,col:e,key:l}),2===oa.value.length&&function(){if(2!==oa.value.length)return;const[a,e]=oa.value,l=e.row-a.row,o=e.col-a.col,n=Math.abs(l)===Math.abs(o),t=0===l,r=0===o;if(!t&&!r&&!n)return la.value="Selecione letras em linha reta (horizontal, vertical ou diagonal).",void fa();let s="",i=[];if(t){const[l,o]=a.col<e.col?[a,e]:[e,a];for(let a=l.col;a<=o.col;a++)s+=Y.value[l.row][a],i.push({row:l.row,col:a})}else if(r){const[l,o]=a.row<e.row?[a,e]:[e,a];for(let a=l.row;a<=o.row;a++)s+=Y.value[a][l.col],i.push({row:a,col:l.col})}else{const e=Math.abs(l),n=l/e,t=o/e;for(let l=0;l<=e;l++){const e=a.row+l*n,o=a.col+l*t;s+=Y.value[e][o],i.push({row:e,col:o})}}const u=s.toUpperCase(),c=u.split("").reverse().join(""),v=Z.value.find((a=>a.word.toUpperCase()===u||a.word.toUpperCase()===c));if(v&&!aa.value.includes(v.word.toUpperCase())){if(aa.value.push(v.word.toUpperCase()),ea.value+=10,i.forEach((a=>{ga[`${a.row}-${a.col}`]=!0})),la.value=`Você encontrou: ${v.word.toUpperCase()}`,fa(),aa.value.length===Z.value.length){const a=function(){const a=Z.value.length*ta.WORD_FOUND,e=ea.value>=0;return a+ta.GAME_COMPLETION+(e?ta.PERFECT_SCORE:0)}();ra(a),na.value=a,setTimeout((()=>{alert(`Parabéns! Você encontrou todas as palavras com ${ea.value} pontos.`),ca()}),500)}}else ea.value-=1,la.value=`Palavra não encontrada: ${u}`,setTimeout((()=>{fa()}),1e3)}())}function pa(a,e){if(2===oa.value.length){const[l,o]=oa.value;if(l.row===o.row&&a===l.row){const a=Math.min(l.col,o.col),n=Math.max(l.col,o.col);return e>=a&&e<=n}if(l.col===o.col&&e===l.col){const e=Math.min(l.row,o.row),n=Math.max(l.row,o.row);return a>=e&&a<=n}}return oa.value.some((l=>l.row===a&&l.col===e))}let ga=n({});function ha(a,e){return!0===ga[`${a}-${e}`]}function fa(){oa.value=[]}return t((()=>{ca()})),(a,e)=>{const l=i("font-awesome-icon");return u(),r(P,{title:"Caça-Palavras",gameInstructions:"Encontre todas as palavras escondidas na grade!\n- Clique e arraste para selecionar as palavras\n- Ganhe 2 pontos por cada palavra encontrada\n- Ganhe 10 pontos por completar o jogo\n- Ganhe 15 pontos de bônus se não errar nenhuma vez\n- Use 'hint' (5 pts) para revelar uma palavra aleatória\n- Use 'extra_time' (3 pts) para +30 segundos",loading:R.value,score:ea.value,availablePerks:["hint"],onSpecialtyChange:ca,onDifficultyChange:ca},{"game-settings":s((()=>[c("div",U,[e[3]||(e[3]=c("h3",null,"Configurações da Grade",-1)),c("div",x,[e[0]||(e[0]=c("label",null,"Tamanho da Célula (16-40px)",-1)),c("input",{type:"range",min:16,max:40,value:q.value,onInput:Q},null,40,I),c("span",null,f(q.value)+"px",1)]),c("div",$,[e[1]||(e[1]=c("label",null,"Largura da Grade (10-40)",-1)),c("input",{type:"range",min:10,max:40,value:L.value,onInput:J},null,40,_),c("span",null,f(L.value),1)]),c("div",z,[e[2]||(e[2]=c("label",null,"Altura da Grade (8-20)",-1)),c("input",{type:"range",min:8,max:20,value:B.value,onInput:K},null,40,j),c("span",null,f(B.value),1)])])])),default:s((()=>[c("div",T,[c("div",{class:p(["word-search-game-panel",{"panel-collapsed":!ia.value}])},[c("button",{class:"toggle-panel-button",onClick:ua},[g(l,{icon:ia.value?"chevron-up":"chevron-down"},null,8,["icon"]),h(" "+f(ia.value?"Ocultar Palavras":"Mostrar Palavras"),1)]),g(m,{name:"slide"},{default:s((()=>[w(c("ul",O,[(u(!0),v(C,null,y(Z.value,(a=>(u(),v("li",{key:a.word,title:a.word,class:p({found:aa.value.includes(a.word.toUpperCase())})},[c("span",null,f(a.clue),1)],10,A)))),128))],512),[[k,ia.value]])])),_:1})],2),c("div",E,[c("div",{class:"game-grid",ref_key:"gameGrid",ref:X,style:b(H.value)},[(u(!0),v(C,null,y(Y.value,((a,e)=>(u(),v("div",{key:e,class:"grid-row"},[(u(!0),v(C,null,y(a,((a,l)=>(u(),v("div",{key:l,class:p(["cell",{selected:pa(e,l),found:ha(e,l)}]),onClick:a=>da(e,l),"data-row":e,"data-col":l},f(a),11,N)))),128))])))),128))],4)]),c("p",W,f(la.value),1),sa.value?(u(),v("div",F,[e[5]||(e[5]=c("h3",null,"Parabéns!",-1)),e[6]||(e[6]=c("p",null,"Você encontrou todas as palavras!",-1)),c("p",null,"Pontos ganhos: "+f(na.value),1),g(G,{variant:"primary",onClick:ca},{default:s((()=>e[4]||(e[4]=[h("Novo Jogo")]))),_:1})])):d("",!0)])])),_:1},8,["loading","score"])}}},[["__scopeId","data-v-c641c66e"]]);export{R as default};
//# sourceMappingURL=WordSearchGame-BhgVZfXj.js.map
