import{_ as a,r as e,v as l,c as o,x as n,a as t,d as r,f as s,l as i,e as u,g as c,h as v,i as d,k as p,p as g,q as h,t as f,T as m,y as w,F as C,j as k,z as y,n as b,B as G}from"./index-DueFXURZ.js";import{u as S,G as P}from"./GameContainer-D0YqVRhg.js";import{u as U}from"./SelectorsComponent-pV0XPKfh.js";import{u as x}from"./useGameState-DN0m8_Rc.js";const M={class:"game-settings"},_={class:"setting-group"},I=["value"],$={class:"setting-group"},z=["value"],j={class:"setting-group"},T=["value"],O={class:"game-content"},A={class:"word-list"},E=["title"],N={class:"game-grid-container"},W=["onClick","data-row","data-col"],F={class:"status"},R={key:0,class:"completion-message"},D=a({__name:"WordSearchGame",setup(a){const D=e(!1),V=l(),q=U(),L=o((()=>V.settings.wordSearchGame.cellSize)),B=o((()=>V.settings.wordSearchGame.gridWidth)),H=o((()=>V.settings.wordSearchGame.gridHeight)),J=o((()=>({display:"grid",gridTemplateColumns:`repeat(${H.value}, ${L.value}px)`,gridTemplateRows:`repeat(${B.value}, ${L.value}px)`,"--cell-size":`${L.value}px`,width:"fit-content",minWidth:"min-content"})));function K(a){const e=parseInt(a.target.value);e>=10&&e<=40&&(V.setWordSearchGridSize(e,H.value,L.value),pa())}function Q(a){const e=parseInt(a.target.value);e>=8&&e<=20&&(V.setWordSearchGridSize(B.value,e,L.value),pa())}function X(a){const e=parseInt(a.target.value);e>=16&&e<=40&&V.setWordSearchGridSize(B.value,H.value,e)}const Y=e(null),Z=e([]),aa=e([]),ea=e([]),la=e(0),oa=e(""),na=e([]),ta=e(0),{POINTS_CONFIG:ra,awardPoints:sa}=S(),{endGame:ia,resetGame:ua}=x(),ca=o((()=>aa.value.length>0&&aa.value.every((a=>ea.value.includes(a.word.toUpperCase()))))),va=e(!0);function da(){va.value=!va.value}function pa(){ua(),la.value=0,oa.value="",na.value=[],ea.value=[],ma=n({});const a=parseInt(H.value),e=parseInt(B.value);Z.value=Array(a).fill().map((()=>Array(e).fill("")));let l=q.words.filter((a=>a.isActive));if(l=l.filter((a=>a.word.length<=B.value&&a.word.length<=H.value)),l.length<10)return void alert("Não há palavras suficientes para iniciar o jogo. Por favor, ajuste os filtros ou adicione mais palavras que caibam na grade.");const o=Array.from(new Set(l.map((a=>a.word.toUpperCase()))));if(o.length<10)return void alert("Não há palavras únicas suficientes para iniciar o jogo. Por favor, ajuste os filtros ou adicione mais palavras.");o.sort((()=>.5-Math.random()));const t=o.slice(0,10);aa.value=t.map((a=>l.find((e=>e.word.toUpperCase()===a)))),aa.value.every((a=>function(a){const e=["horizontal","vertical","diagonal-down","diagonal-up"].filter((e=>{const l=["horizontal","diagonal-down","diagonal-up"].includes(e),o=["vertical","diagonal-down"].includes(e),n="diagonal-up"===e;return!(l&&a.length>B.value)&&(!(o&&a.length>H.value)&&!(n&&a.length>H.value))}));if(0===e.length)return!1;const l=[];for(const o of e){const e=H.value-(["vertical","diagonal-down"].includes(o)?a.length:0),n="diagonal-up"===o?a.length-1:0,t=B.value-(["horizontal","diagonal-down","diagonal-up"].includes(o)?a.length:0);for(let r=n;r<e;r++)for(let e=0;e<t;e++){const n=ga(a,r,e,o);n.canPlace&&l.push({row:r,col:e,direction:o,intersections:n.intersections})}}if(l.sort(((a,e)=>e.intersections===a.intersections?Math.random()-.5:e.intersections-a.intersections)),l.length>0){const e=l[0];return function(a,e,l,o){for(let n=0;n<a.length;n++){let t=e,r=l;switch(o){case"horizontal":r+=n;break;case"vertical":t+=n;break;case"diagonal-down":t+=n,r+=n;break;case"diagonal-up":t-=n,r+=n}Z.value[t][r]=a[n]}}(a,e.row,e.col,e.direction),!0}return!1}(a.word.toUpperCase())))?function(){const a="ABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let e=0;e<H.value;e++)for(let l=0;l<B.value;l++)""===Z.value[e][l]&&(Z.value[e][l]=a.charAt(Math.floor(Math.random()*a.length)))}():pa()}function ga(a,e,l,o){let n=!0,t=0;for(let r=0;r<a.length;r++){let s=e,i=l;switch(o){case"horizontal":i+=r;break;case"vertical":s+=r;break;case"diagonal-down":s+=r,i+=r;break;case"diagonal-up":s-=r,i+=r}const u=Z.value[s][i];if(""!==u){if(u!==a[r]){n=!1;break}t++}}return{canPlace:n,intersections:t}}function ha(a,e){const l=`${a}-${e}`;na.value.some((a=>a.key===l))?na.value=na.value.filter((a=>a.key!==l)):(na.value.push({row:a,col:e,key:l}),2===na.value.length&&async function(){if(2!==na.value.length)return;const[a,e]=na.value,l=e.row-a.row,o=e.col-a.col,n=Math.abs(l)===Math.abs(o),t=0===l,r=0===o;if(!t&&!r&&!n)return oa.value="Selecione letras em linha reta (horizontal, vertical ou diagonal).",void Ca();let s="",i=[];if(t){const[l,o]=a.col<e.col?[a,e]:[e,a];for(let a=l.col;a<=o.col;a++)s+=Z.value[l.row][a],i.push({row:l.row,col:a})}else if(r){const[l,o]=a.row<e.row?[a,e]:[e,a];for(let a=l.row;a<=o.row;a++)s+=Z.value[a][l.col],i.push({row:a,col:l.col})}else{const e=Math.abs(l),n=l/e,t=o/e;for(let l=0;l<=e;l++){const e=a.row+l*n,o=a.col+l*t;s+=Z.value[e][o],i.push({row:e,col:o})}}const u=s.toUpperCase(),c=u.split("").reverse().join(""),v=aa.value.find((a=>a.word.toUpperCase()===u||a.word.toUpperCase()===c));if(v&&!ea.value.includes(v.word.toUpperCase())){if(ea.value.push(v.word.toUpperCase()),la.value+=10,i.forEach((a=>{ma[`${a.row}-${a.col}`]=!0})),oa.value=`Você encontrou: ${v.word.toUpperCase()}`,Ca(),ea.value.length===aa.value.length){ia();const a=function(){const a=aa.value.length*ra.WORD_FOUND,e=la.value>=0;return a+ra.GAME_COMPLETION+(e?ra.PERFECT_SCORE:0)}();await sa(a),ta.value=a,setTimeout((()=>{alert(`Parabéns! Você encontrou todas as palavras com ${la.value} pontos.`),pa()}),500)}}else la.value-=1,oa.value=`Palavra não encontrada: ${u}`,setTimeout((()=>{Ca()}),1e3)}())}function fa(a,e){if(2===na.value.length){const[l,o]=na.value;if(l.row===o.row&&a===l.row){const a=Math.min(l.col,o.col),n=Math.max(l.col,o.col);return e>=a&&e<=n}if(l.col===o.col&&e===l.col){const e=Math.min(l.row,o.row),n=Math.max(l.row,o.row);return a>=e&&a<=n}}return na.value.some((l=>l.row===a&&l.col===e))}let ma=n({});function wa(a,e){return!0===ma[`${a}-${e}`]}function Ca(){na.value=[]}return t((()=>{pa()})),(a,e)=>{const l=i("font-awesome-icon");return u(),r(P,{title:"Caça-Palavras",gameInstructions:"Encontre todas as palavras escondidas na grade!\n- Clique e arraste para selecionar as palavras\n- Ganhe 2 pontos por cada palavra encontrada\n- Ganhe 10 pontos por completar o jogo\n- Ganhe 15 pontos de bônus se não errar nenhuma vez\n- Use 'hint' (5 pts) para revelar uma palavra aleatória\n- Use 'extra_time' (3 pts) para +30 segundos\n- Use 'skip' (10 pts) para gerar um novo jogo",loading:D.value,score:la.value,availablePerks:["hint","skip","extra_time"],onSpecialtyChange:pa,onDifficultyChange:pa},{"game-settings":s((()=>[c("div",M,[e[3]||(e[3]=c("h3",null,"Configurações da Grade",-1)),c("div",_,[e[0]||(e[0]=c("label",null,"Tamanho da Célula (16-40px)",-1)),c("input",{type:"range",min:16,max:40,value:L.value,onInput:X},null,40,I),c("span",null,f(L.value)+"px",1)]),c("div",$,[e[1]||(e[1]=c("label",null,"Largura da Grade (10-40)",-1)),c("input",{type:"range",min:10,max:40,value:B.value,onInput:K},null,40,z),c("span",null,f(B.value),1)]),c("div",j,[e[2]||(e[2]=c("label",null,"Altura da Grade (8-20)",-1)),c("input",{type:"range",min:8,max:20,value:H.value,onInput:Q},null,40,T),c("span",null,f(H.value),1)])])])),default:s((()=>[c("div",O,[c("div",{class:p(["word-search-game-panel",{"panel-collapsed":!va.value}])},[c("button",{class:"toggle-panel-button",onClick:da},[g(l,{icon:va.value?"chevron-up":"chevron-down"},null,8,["icon"]),h(" "+f(va.value?"Ocultar Palavras":"Mostrar Palavras"),1)]),g(m,{name:"slide"},{default:s((()=>[w(c("ul",A,[(u(!0),v(C,null,k(aa.value,(a=>(u(),v("li",{key:a.word,title:a.word,class:p({found:ea.value.includes(a.word.toUpperCase())})},[c("span",null,f(a.clue),1)],10,E)))),128))],512),[[y,va.value]])])),_:1})],2),c("div",N,[c("div",{class:"game-grid",ref_key:"gameGrid",ref:Y,style:b(J.value)},[(u(!0),v(C,null,k(Z.value,((a,e)=>(u(),v("div",{key:e,class:"grid-row"},[(u(!0),v(C,null,k(a,((a,l)=>(u(),v("div",{key:l,class:p(["cell",{selected:fa(e,l),found:wa(e,l)}]),onClick:a=>ha(e,l),"data-row":e,"data-col":l},f(a),11,W)))),128))])))),128))],4)]),c("p",F,f(oa.value),1),ca.value?(u(),v("div",R,[e[5]||(e[5]=c("h3",null,"Parabéns!",-1)),e[6]||(e[6]=c("p",null,"Você encontrou todas as palavras!",-1)),c("p",null,"Pontos ganhos: "+f(ta.value),1),g(G,{variant:"primary",onClick:pa},{default:s((()=>e[4]||(e[4]=[h("Novo Jogo")]))),_:1})])):d("",!0)])])),_:1},8,["loading","score"])}}},[["__scopeId","data-v-fb2d42fa"]]);export{D as default};
//# sourceMappingURL=WordSearchGame-lT962fbt.js.map
