import{_ as e,u as a,c as l,v as i,r as s,x as c,a as t,o,h as n,g as u,p as r,i as d,y as v,A as f,D as p,k as m,l as y,f as w,B as h,d as k,t as g,F as b,j as C,E as V,T as A,z as D,e as _,q as x,G as S,H as z,I as O}from"./index-Bfo6PRYR.js";import{u as q,S as T,s as U}from"./SelectorsComponent-BHgr9fBZ.js";const E={class:"vocab-header"},I={class:"search-word"},j={class:"filters"},L={class:"filter-buttons"},P={class:"actions"},M={class:"results-info"},F={class:"results-count"},N={class:"vocabulary-list"},B=["onClick"],J={class:"card-header"},G={class:"card-badges"},H={key:0,class:"card-details"},K={class:"clue"},R={class:"specialties-tags"},W={class:"card-actions"},Y={key:1,class:"edit-form"},Q={class:"specialties-select"},X={class:"specialties-grid"},Z=["onClick"],$={class:"edit-actions"},ee={class:"form-group"},ae={class:"difficulty-section"},le={class:"specialties-section"},ie={class:"specialties-grid"},se=["onClick"],ce={key:0,class:"word-preview"},te={class:"preview-card"},oe={class:"preview-clue"},ne={class:"preview-tags"},ue={class:"modal-actions"},re={key:0,class:"loading-overlay"},de={class:"loading-content"},ve={key:0,class:"batch-actions-bar"},fe={class:"selected-count"},pe=e({__name:"MyVocabulary",setup(e){const pe=a(),me=l((()=>pe.isDarkMode)),ye=q(),we=i(),he=s(!1),ke=s(!1),ge=s(""),be=s(!1),Ce=s(!1),Ve=s(new Set),Ae=s([]),De=s([]),_e=c({}),xe=s(!1),Se=s(""),ze=s(!1),Oe=s(!1);function qe(){ze.value=window.scrollY>300}function Te(){window.scrollTo({top:0,behavior:"smooth"})}function Ue(){Oe.value=!Oe.value}function Ee(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase()}t((()=>{window.addEventListener("scroll",qe)})),o((()=>{window.removeEventListener("scroll",qe)}));const Ie=l((()=>{const e={};return je.value.forEach((a=>{const l=Ee(a.word);e[l]=(e[l]||0)+1})),e})),je=l((()=>{let e=ye.words;if("all"!==we.selectedSpecialty){const a=parseInt(we.selectedSpecialty);e=e.filter((e=>e.specialties.includes(a)))}if("all"!==we.selectedDifficulty){const a=parseInt(we.selectedDifficulty);e=e.filter((e=>e.difficulty===a))}if(ke.value&&(e=e.filter((e=>e.isActive))),""!==ge.value.trim()){const a=ge.value.trim().toLowerCase();e=e.filter((e=>e.word.toLowerCase().includes(a)||e.clue.toLowerCase().includes(a)))}return e.sort(((e,a)=>e.word.localeCompare(a.word)))}));function Le(e){const a=Ae.value.indexOf(e);-1===a?Ae.value.push(e):Ae.value.splice(a,1)}function Pe(e){return Ae.value.includes(e)}function Me(){he.value=!he.value}function Fe(){ke.value=!ke.value}function Ne(){be.value=!0}function Be(){be.value=!1}const Je=c({word:"",clue:"",specialties:[],difficulty:null}),Ge=c({word:null,clue:null,specialties:null,difficulty:null}),He=l((()=>!Object.values(Ge).some((e=>null!==e)))),Ke=l((()=>Je.word.trim()&&Je.clue.trim()&&Je.specialties.length>0&&Je.difficulty));function Re(e){switch(e){case"word":Ge.word=Je.word.trim()?null:"A palavra é obrigatória.";break;case"clue":Ge.clue=Je.clue.trim()?null:"A dica é obrigatória.";break;case"specialties":Ge.specialties=Je.specialties.length>0?null:"Selecione pelo menos uma especialidade.";break;case"difficulty":Ge.difficulty=Je.difficulty?null:"Selecione um nível de dificuldade."}}async function We(){if(Re("word"),Re("clue"),Re("specialties"),Re("difficulty"),He.value)try{xe.value=!0,Se.value="adding";if(ye.words.some((e=>Ee(e.word)===Je.word.trim().toLowerCase()))&&!confirm("A palavra já existe. Deseja adicionar outra instância?"))return;const e={word:Je.word.trim(),clue:Je.clue.trim(),specialties:[...Je.specialties],difficulty:Je.difficulty,isActive:!0};ye.words.push(e),await U(ye.words),Be(),Je.word="",Je.clue="",Je.specialties=[],Je.difficulty=null}catch(e){alert("Ocorreu um erro ao adicionar a palavra. Tente novamente.")}finally{xe.value=!1,Se.value=""}else alert("Preencha todos os campos corretamente.")}function Ye(e){const a=De.value.indexOf(e);-1!==a&&(De.value.splice(a,1),delete _e[e])}function Qe(){}function Xe(e){return{1:"Fácil",2:"Média",3:"Difícil"}[e]||"Desconhecida"}function Ze(e){return Ee(e.word)}const $e=[{value:1,label:"Fácil"},{value:2,label:"Média"},{value:3,label:"Difícil"}],ea=l((()=>{switch(Se.value){case"adding":return"Adicionando palavra...";case"editing":return"Salvando alterações...";case"toggling":return"Atualizando estado...";case"deleting":return"Excluindo palavras...";default:return"Carregando..."}}));function aa(){Ce.value=!Ce.value,Ce.value||Ve.value.clear()}function la(){je.value.forEach((e=>{Ve.value.add(e)}))}function ia(){Ve.value.clear()}async function sa(){if(Ve.value.size)try{xe.value=!0,Se.value="toggling";for(const e of Ve.value)e.isActive=!0;await U(ye.words),Ve.value.clear()}catch(e){alert("Ocorreu um erro ao ativar as palavras. Tente novamente.")}finally{xe.value=!1,Se.value=""}}async function ca(){if(Ve.value.size)try{xe.value=!0,Se.value="toggling";for(const e of Ve.value)e.isActive=!1;await U(ye.words),Ve.value.clear()}catch(e){alert("Ocorreu um erro ao desativar as palavras. Tente novamente.")}finally{xe.value=!1,Se.value=""}}async function ta(){if(Ve.value.size&&confirm("Deseja realmente excluir todas as palavras selecionadas?"))try{xe.value=!0,Se.value="deleting",ye.words=ye.words.filter((e=>!Ve.value.has(e))),await U(ye.words),Ve.value.clear()}catch(e){alert("Ocorreu um erro ao excluir as palavras. Tente novamente.")}finally{xe.value=!1,Se.value=""}}return(e,a)=>{const l=y("font-awesome-icon");return _(),n("div",{class:m(["my-vocabulary",{dark:me.value}])},[u("div",E,[a[12]||(a[12]=u("h1",null,"Meu Vocabulário",-1)),u("div",I,[r(p,{modelValue:ge.value,"onUpdate:modelValue":a[0]||(a[0]=e=>ge.value=e),placeholder:"Buscar palavra ou definição...",icon:"search",onKeyup:f(Qe,["enter"])},null,8,["modelValue"])]),u("div",{class:"mobile-controls-toggle",onClick:Ue},[a[8]||(a[8]=u("span",null,"Controles",-1)),r(l,{icon:Oe.value?"chevron-up":"chevron-down",class:m(["arrow",{up:Oe.value}])},null,8,["icon","class"])]),u("div",{class:m(["vocab-controls",{expanded:Oe.value}])},[u("div",j,[u("div",L,[r(h,{variant:"primary",icon:"plus",onClick:Ne},{default:w((()=>a[9]||(a[9]=[x(" Adicionar ")]))),_:1}),r(h,{variant:"outline",icon:ke.value?"eye":"eye-slash",onClick:Fe,class:m({active:ke.value,toggle:!0})},{default:w((()=>[x(g(ke.value?"Todos":"Apenas ativos"),1)])),_:1},8,["icon","class"]),r(h,{variant:"outline",icon:"highlighter",onClick:Me,class:m({active:he.value})},{default:w((()=>[x(g(he.value?"Remover Destaque":"Destacar Duplicatas"),1)])),_:1},8,["class"])])]),u("div",P,[r(h,{variant:"outline",icon:"check-square",onClick:aa,class:m({active:Ce.value})},{default:w((()=>[x(g(Ce.value?"Cancelar":"Selecionar Itens"),1)])),_:1},8,["class"]),Ce.value?(_(),k(h,{key:0,variant:"outline",icon:"check",onClick:la},{default:w((()=>a[10]||(a[10]=[x(" Selecionar Todos ")]))),_:1})):d("",!0),Ce.value?(_(),k(h,{key:1,variant:"outline",icon:"times",onClick:ia},{default:w((()=>a[11]||(a[11]=[x(" Desselecionar Todos ")]))),_:1})):d("",!0)]),r(T)],2),u("div",M,[u("p",F,g(je.value.length)+" termos encontrados",1)])]),u("div",N,[(_(!0),n(b,null,C(je.value,((l,i)=>(_(),n("div",{key:l.word+i,class:m(["term-item",{duplicate:he.value&&Ie.value[Ze(l)]>1,expanded:Pe(i),selected:Ve.value.has(l)}]),onClick:e=>!De.value.includes(i)&&Le(i)},[u("div",J,[u("h2",null,g(l.word),1),u("div",G,[u("span",{class:m(["badge difficulty-badge","difficulty-"+l.difficulty])},g(Xe(l.difficulty)),3),u("span",{class:m(["badge active-badge",{"is-active":l.isActive}])},g(l.isActive?"Ativo":"Inativo"),3)])]),Pe(i)?(_(),n("div",H,[u("p",K,g(l.clue),1),u("div",R,[(_(!0),n(b,null,C(l.specialties,(e=>(_(),n("span",{key:e,class:"specialty-tag"},g(S(ye).specialties[e]),1)))),128))]),u("div",W,[r(h,{variant:"outline",icon:"edit",onClick:z((e=>function(e){De.value.includes(e)?Ye(e):(Pe(e)||Le(e),De.value.push(e),_e[e]=JSON.parse(JSON.stringify(je.value[e])))}(i)),["stop"]),size:"sm"},null,8,["onClick"]),r(h,{variant:"outline",icon:"trash",onClick:z((a=>e.deleteWord(i)),["stop"]),size:"sm"},null,8,["onClick"]),r(h,{variant:"outline",icon:l.isActive?"eye":"eye-slash",onClick:z((e=>async function(e){try{xe.value=!0,Se.value="toggling",e.isActive=!e.isActive,await U(ye.words)}catch(a){e.isActive=!e.isActive,alert("Ocorreu um erro ao alterar o estado. Tente novamente.")}finally{xe.value=!1,Se.value=""}}(l)),["stop"]),size:"sm"},null,8,["icon","onClick"]),Ce.value?(_(),k(h,{key:0,variant:"outline",icon:"check-square",onClick:z((e=>function(e,a){a.stopPropagation(),Ve.value.has(e)?Ve.value.delete(e):Ve.value.add(e)}(l,e)),["stop"]),size:"sm",class:m({active:Ve.value.has(l)})},null,8,["onClick","class"])):d("",!0)])])):d("",!0),De.value.includes(i)?(_(),n("div",Y,[r(p,{modelValue:_e[i].word,"onUpdate:modelValue":e=>_e[i].word=e,label:"Palavra",required:""},null,8,["modelValue","onUpdate:modelValue"]),r(p,{modelValue:_e[i].clue,"onUpdate:modelValue":e=>_e[i].clue=e,label:"Dica",type:"textarea",required:""},null,8,["modelValue","onUpdate:modelValue"]),r(O,{modelValue:_e[i].difficulty,"onUpdate:modelValue":e=>_e[i].difficulty=e,options:$e,label:"Dificuldade",required:""},null,8,["modelValue","onUpdate:modelValue"]),u("div",Q,[a[13]||(a[13]=u("label",null,"Especialidades:",-1)),u("div",X,[(_(!0),n(b,null,C(S(ye).specialties,((e,a)=>(_(),n("button",{key:a,type:"button",class:m(["specialty-button",{selected:_e[i].specialties.includes(a)}]),onClick:e=>function(e,a){const l=_e[e].specialties.indexOf(a);-1===l?_e[e].specialties.push(a):_e[e].specialties.splice(l,1)}(i,a)},g(e),11,Z)))),128))])]),u("div",$,[r(h,{variant:"primary",icon:"save",onClick:e=>async function(e){const a=_e[e];if(a.word.trim()&&a.clue.trim()&&a.difficulty&&0!==a.specialties.length)try{xe.value=!0,Se.value="editing";const l=ye.words.findIndex((a=>a.word===je.value[e].word));-1!==l&&(ye.words[l]={...a},await U(ye.words)),Ye(e)}catch(l){alert("Ocorreu um erro ao salvar as alterações. Tente novamente.")}finally{xe.value=!1,Se.value=""}else alert("Preencha todos os campos corretamente.")}(i)},{default:w((()=>a[14]||(a[14]=[x(" Salvar ")]))),_:2},1032,["onClick"]),r(h,{variant:"outline",icon:"times",onClick:e=>Ye(i)},{default:w((()=>a[15]||(a[15]=[x(" Cancelar ")]))),_:2},1032,["onClick"])])])):d("",!0)],10,B)))),128))]),r(V,{modelValue:be.value,"onUpdate:modelValue":a[7]||(a[7]=e=>be.value=e),title:"Adicionar Nova Palavra"},{default:w((()=>[u("form",{onSubmit:z(We,["prevent"]),class:"add-word-form"},[u("div",ee,[r(p,{modelValue:Je.word,"onUpdate:modelValue":a[1]||(a[1]=e=>Je.word=e),label:"Palavra",required:"",error:Ge.word,onInput:a[2]||(a[2]=e=>Re("word")),placeholder:"Digite a palavra médica"},null,8,["modelValue","error"]),r(p,{modelValue:Je.clue,"onUpdate:modelValue":a[3]||(a[3]=e=>Je.clue=e),label:"Dica",type:"textarea",required:"",error:Ge.clue,onInput:a[4]||(a[4]=e=>Re("clue")),placeholder:"Digite uma dica clara e concisa"},null,8,["modelValue","error"])]),u("div",ae,[r(O,{modelValue:Je.difficulty,"onUpdate:modelValue":a[5]||(a[5]=e=>Je.difficulty=e),options:$e,label:"Dificuldade",required:"",error:Ge.difficulty,onChange:a[6]||(a[6]=e=>Re("difficulty"))},null,8,["modelValue","error"]),a[16]||(a[16]=u("p",{class:"field-hint"},"Escolha o nível de dificuldade apropriado",-1))]),u("div",le,[a[17]||(a[17]=u("label",null,"Especialidades:",-1)),u("p",{class:m(["field-hint",{"error-text":Ge.specialties}])}," Selecione uma ou mais especialidades relacionadas ",2),u("div",ie,[(_(!0),n(b,null,C(S(ye).specialties,((e,a)=>(_(),n("button",{key:a,type:"button",class:m(["specialty-button",{selected:Je.specialties.includes(a),"with-error":Ge.specialties}]),onClick:e=>function(e){const a=Je.specialties.indexOf(e);-1===a?Je.specialties.push(e):Je.specialties.splice(a,1),Re("specialties")}(a)},g(e),11,se)))),128))])]),Ke.value?(_(),n("div",ce,[a[18]||(a[18]=u("h4",null,"Pré-visualização",-1)),u("div",te,[u("h3",null,g(Je.word),1),u("p",oe,g(Je.clue),1),u("div",ne,[(_(!0),n(b,null,C(Je.specialties,(e=>(_(),n("span",{key:e,class:"preview-tag"},g(S(ye).specialties[e]),1)))),128)),u("span",{class:m(["preview-difficulty","difficulty-"+Je.difficulty])},g(Xe(Je.difficulty)),3)])])])):d("",!0),u("div",ue,[r(h,{type:"submit",variant:"primary",icon:"plus",disabled:!He.value},{default:w((()=>a[19]||(a[19]=[x(" Adicionar ")]))),_:1},8,["disabled"]),r(h,{type:"button",variant:"outline",icon:"times",onClick:Be},{default:w((()=>a[20]||(a[20]=[x(" Cancelar ")]))),_:1})])],32)])),_:1},8,["modelValue"]),r(A,{name:"fade"},{default:w((()=>[xe.value?(_(),n("div",re,[u("div",de,[r(l,{icon:"circle-notch",size:"2x",class:"loading-spinner"}),u("p",null,g(ea.value),1)])])):d("",!0)])),_:1}),Ce.value&&Ve.value.size>0?(_(),n("div",ve,[u("div",fe,[r(l,{icon:"check-square"}),u("span",null,g(Ve.value.size)+" selecionados",1)]),r(h,{variant:"outline",icon:"check",onClick:sa},{default:w((()=>a[21]||(a[21]=[x(" Ativar Selecionados ")]))),_:1}),r(h,{variant:"outline",icon:"times",onClick:ca},{default:w((()=>a[22]||(a[22]=[x(" Desativar Selecionados ")]))),_:1}),r(h,{variant:"accent",icon:"trash",onClick:ta},{default:w((()=>a[23]||(a[23]=[x(" Excluir Selecionados ")]))),_:1})])):d("",!0),v(u("button",{onClick:Te,class:"scroll-top-button",title:"Voltar ao topo"},[r(l,{icon:"arrow-up"})],512),[[D,ze.value]])],2)}}},[["__scopeId","data-v-f35a9d4b"]]);export{pe as default};
//# sourceMappingURL=MyVocabulary-whmK0TUS.js.map
