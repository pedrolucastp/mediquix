import{u as e,G as a}from"./GameContainer-BDJuIAcC.js";import{r as t,o as l,_ as o,c as u,w as s,a as r,b as n,d as i,e as v,f as c,g as d,h as p,t as m,F as f,i as g,n as w,j as h,k}from"./index-Be4NLPVX.js";import{u as T}from"./SelectorsComponent-D3vocjYp.js";const _={class:"game-content"},b={key:0,class:"score-container"},C={class:"progress-bar"},y={class:"word-display"},O={class:"options-container"},R=["onClick","disabled"],P={key:0,class:"feedback-container"},D={key:0},G=o({__name:"QuickQuizGame",setup(o){const G=t(!1),x=t(0),F=t(10),I=t(10),N=t([]),S=t(!0),U=t(""),L=t(!1),E=t(!1),j=t(""),q=t(!1),W=t(100),z=t(0),A=t(0),M=t(0),Q=t(!1),V=t(!1),$=T(),{POINTS_CONFIG:B,awardPoints:H}=e(),{timeLeft:J,startTimer:K,pauseTimer:X,resetTimer:Y}=function(e={}){const{initialTime:a=60,tickRate:o=10,onTimeUp:u=()=>{},autoStart:s=!1}=e,r=t(a),n=t(a.toString());let i=null;function v(){c();let e=1e3*r.value;i=setInterval((()=>{e-=o,r.value=e/1e3,n.value=(e/1e3).toFixed(0),e<=0&&(c(),u())}),o)}function c(){i&&(clearInterval(i),i=null)}return s&&v(),l((()=>{c()})),{timeLeft:r,timerDisplay:n,startTimer:v,pauseTimer:function(){c()},resetTimer:function(){c(),r.value=a,n.value=a.toString()},clearTimer:c}}({initialTime:F.value,onTimeUp:()=>{L.value||(L.value=!0,V.value=!0,E.value=!1,j.value="Tempo esgotado! A resposta correta era: "+Z.value.word)}}),Z=u((()=>N.value[x.value])),ee=u((()=>Z.value?te([...Z.value.options]):[])),ae=u((()=>N.value.length-x.value));function te(e){return e.sort((()=>Math.random()-.5))}function le(){x.value=0;const e=$.filteredWords;if(0===e.length)return alert("Nenhuma questão encontrada com os critérios selecionados."),void(S.value=!1);const a=te([...e]).slice(0,I.value);N.value=a.map((a=>({...a,options:oe(a,e)}))),S.value=!0,ue()}function oe(e,a){const t=[e.word],l=te(a.filter((a=>a.word!==e.word)).map((e=>e.word))).slice(0,3);return te([...t,...l])}function ue(){U.value="",L.value=!1,E.value=!1,j.value="",q.value=x.value===N.value.length-1,W.value=100,V.value=!1,Y(),K()}function se(e){L.value||V.value||(U.value=e,X(),function(){if(!Z.value)return;L.value=!0,E.value=U.value.trim().toLowerCase()===Z.value.word.toLowerCase(),j.value=E.value?"Resposta correta!":`Resposta incorreta! A resposta correta era: ${Z.value.word}`,E.value?(M.value++,z.value+=B.WORD_FOUND,A.value=B.WORD_FOUND):A.value=0}())}function re(){q.value?async function(){S.value=!1,Q.value=!0;try{const e=M.value===N.value.length,a=function(e,a){let t=e*B.WORD_FOUND;a&&(t+=B.PERFECT_SCORE);return t+B.GAME_COMPLETION}(M.value,e);await H(a),A.value=a}catch(e){alert("Você precisa estar logado para ganhar pontos!")}}():(x.value++,ue())}return s(J,(e=>{W.value=e/F.value*100})),s(F,(e=>{Y()})),r((()=>{le()})),n((()=>{})),(e,t)=>(v(),i(a,{title:"Quiz Rápido",gameInstructions:"Responda as questões em tempo limitado!\n- Leia a pergunta e digite a resposta\n- Ganhe 2 pontos por resposta correta\n- Ganhe 10 pontos por completar o quiz\n- Ganhe 15 pontos de bônus por acertar todas\n- Use 'skip' (8 pts) para pular uma questão\n- Use 'extra_time' (3 pts) para +30 segundos",loading:G.value,score:z.value,availablePerks:["skip","extra_time"],onSpecialtyChange:le,onDifficultyChange:le},{default:c((()=>[d("div",_,[Z.value?(v(),p(f,{key:1},[d("div",C,[d("div",{class:"timer",style:w({width:`${W.value}%`})},null,4)]),d("div",y,[d("h2",null,m(Z.value.clue),1)]),d("div",O,[(v(!0),p(f,null,h(ee.value,(e=>(v(),p("button",{key:e,class:k(["option-button",{selected:U.value===e,correct:L.value&&!V.value&&e===Z.value.word,incorrect:L.value&&!V.value&&U.value===e&&e!==Z.value.word,"timeout-correct":V.value&&e===Z.value.word,"timeout-incorrect":V.value&&e!==Z.value.word}]),onClick:a=>se(e),disabled:L.value||V.value},m(e),11,R)))),128))]),L.value||V.value?(v(),p("div",P,[d("p",{class:k({"feedback-correct":E.value,"feedback-incorrect":!E.value})},m(j.value),3),E.value?(v(),p("p",D,"Pontos ganhos: "+m(A.value),1)):g("",!0),d("button",{class:"next-button",onClick:re},m(q.value?"Ver Resultados":"Próxima Palavra"),1)])):g("",!0)],64)):(v(),p("div",b,[d("p",null,"Total de pontos: "+m(z.value),1),d("p",null,"Palavras restantes: "+m(ae.value),1)]))])])),_:1},8,["loading","score"]))}},[["__scopeId","data-v-55698094"]]);export{G as default};
//# sourceMappingURL=QuickQuizGame-D1EjsIYm.js.map
