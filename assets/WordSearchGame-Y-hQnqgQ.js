import{u as e,S as a}from"./SelectorsComponent-Cw4VZ0c4.js";import{_ as o,a as l,B as t}from"./index-cXKaoF06.js";import{u as n,G as r}from"./GamePerksMenu-LuGFlCVD.js";import{c as s,r as i,I as u,o as c,j as v,g as d,k as p,m as h,F as g,s as f,n as w,t as m,b as k,e as C,p as b,x as y}from"./vue-vendor-COnmh5Ey.js";import"./firebase-B6Q9gzvC.js";import"./fontawesome-IKCYsCpo.js";const S={class:"word-search-game"},P={class:"game-container"},M={class:"word-search-game-panel"},$={class:"word-list"},U=["title"],I={class:"game-grid-container"},z=["onClick","data-row","data-col"],G={class:"grid-controls"},j={class:"control-group"},x=["value"],_={class:"control-group"},T=["value"],A={class:"control-group"},E=["value"],N={class:"status"},O={key:0,class:"completion-message"},W=o({__name:"WordSearchGame",setup(o){const W=l(),F=e(),L=s((()=>W.settings.wordSearchGame.cellSize)),R=s((()=>W.settings.wordSearchGame.gridWidth)),D=s((()=>W.settings.wordSearchGame.gridHeight)),V=s((()=>({display:"grid",gridTemplateColumns:`repeat(${D.value}, ${L.value}px)`,gridTemplateRows:`repeat(${R.value}, ${L.value}px)`,"--cell-size":`${L.value}px`,width:"fit-content",minWidth:"min-content"})));function q(e){const a=parseInt(e.target.value);a>=10&&a<=40&&(W.setWordSearchGridSize(a,D.value,L.value),re())}function B(e){const a=parseInt(e.target.value);a>=8&&a<=20&&(W.setWordSearchGridSize(R.value,a,L.value),re())}function H(e){const a=parseInt(e.target.value);a>=16&&a<=40&&W.setWordSearchGridSize(R.value,D.value,a)}const J=i(null),K=i([]),Q=i([]),X=i([]),Y=i(0),Z=i(""),ee=i([]),ae=i(0),{POINTS_CONFIG:oe,awardPoints:le,usePerk:te}=n(),ne=s((()=>Q.value.length>0&&Q.value.every((e=>X.value.includes(e.word.toUpperCase())))));function re(){Y.value=0,Z.value="",ee.value=[],X.value=[],ce=u({});const e=parseInt(D.value),a=parseInt(R.value);K.value=Array(e).fill().map((()=>Array(a).fill("")));let o=F.words.filter((e=>e.isActive));if(o=o.filter((e=>e.word.length<=R.value&&e.word.length<=D.value)),o.length<10)return void alert("Não há palavras suficientes para iniciar o jogo. Por favor, ajuste os filtros ou adicione mais palavras que caibam na grade.");const l=Array.from(new Set(o.map((e=>e.word.toUpperCase()))));if(l.length<10)return void alert("Não há palavras únicas suficientes para iniciar o jogo. Por favor, ajuste os filtros ou adicione mais palavras.");l.sort((()=>.5-Math.random()));const t=l.slice(0,10);Q.value=t.map((e=>o.find((a=>a.word.toUpperCase()===e)))),Q.value.every((e=>function(e){const a=["horizontal","vertical","diagonal-down","diagonal-up"].filter((a=>{const o=["horizontal","diagonal-down","diagonal-up"].includes(a),l=["vertical","diagonal-down"].includes(a),t="diagonal-up"===a;return!(o&&e.length>R.value)&&(!(l&&e.length>D.value)&&!(t&&e.length>D.value))}));if(0===a.length)return!1;const o=[];for(const l of a){const a=D.value-(["vertical","diagonal-down"].includes(l)?e.length:0),t="diagonal-up"===l?e.length-1:0,n=R.value-(["horizontal","diagonal-down","diagonal-up"].includes(l)?e.length:0);for(let r=t;r<a;r++)for(let a=0;a<n;a++){const t=se(e,r,a,l);t.canPlace&&o.push({row:r,col:a,direction:l,intersections:t.intersections})}}if(o.sort(((e,a)=>a.intersections===e.intersections?Math.random()-.5:a.intersections-e.intersections)),o.length>0){const a=o[0];return function(e,a,o,l){for(let t=0;t<e.length;t++){let n=a,r=o;switch(l){case"horizontal":r+=t;break;case"vertical":n+=t;break;case"diagonal-down":n+=t,r+=t;break;case"diagonal-up":n-=t,r+=t}K.value[n][r]=e[t]}}(e,a.row,a.col,a.direction),!0}return!1}(e.word.toUpperCase())))?function(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let a=0;a<D.value;a++)for(let o=0;o<R.value;o++)""===K.value[a][o]&&(K.value[a][o]=e.charAt(Math.floor(Math.random()*e.length)))}():re()}function se(e,a,o,l){let t=!0,n=0;for(let r=0;r<e.length;r++){let s=a,i=o;switch(l){case"horizontal":i+=r;break;case"vertical":s+=r;break;case"diagonal-down":s+=r,i+=r;break;case"diagonal-up":s-=r,i+=r}const u=K.value[s][i];if(""!==u){if(u!==e[r]){t=!1;break}n++}}return{canPlace:t,intersections:n}}function ie(e,a){const o=`${e}-${a}`;ee.value.some((e=>e.key===o))?ee.value=ee.value.filter((e=>e.key!==o)):(ee.value.push({row:e,col:a,key:o}),2===ee.value.length&&function(){if(2!==ee.value.length)return;const[e,a]=ee.value,o=a.row-e.row,l=a.col-e.col,t=Math.abs(o)===Math.abs(l),n=0===o,r=0===l;if(!n&&!r&&!t)return Z.value="Selecione letras em linha reta (horizontal, vertical ou diagonal).",void he();let s="",i=[];if(n){const[o,l]=e.col<a.col?[e,a]:[a,e];for(let e=o.col;e<=l.col;e++)s+=K.value[o.row][e],i.push({row:o.row,col:e})}else if(r){const[o,l]=e.row<a.row?[e,a]:[a,e];for(let e=o.row;e<=l.row;e++)s+=K.value[e][o.col],i.push({row:e,col:o.col})}else{const a=Math.abs(o),t=o/a,n=l/a;for(let o=0;o<=a;o++){const a=e.row+o*t,l=e.col+o*n;s+=K.value[a][l],i.push({row:a,col:l})}}const u=s.toUpperCase(),c=u.split("").reverse().join(""),v=Q.value.find((e=>e.word.toUpperCase()===u||e.word.toUpperCase()===c));if(v&&!X.value.includes(v.word.toUpperCase())){if(X.value.push(v.word.toUpperCase()),Y.value+=10,i.forEach((e=>{ce[`${e.row}-${e.col}`]=!0})),Z.value=`Você encontrou: ${v.word.toUpperCase()}`,he(),X.value.length===Q.value.length){const e=Q.value.length*oe.WORD_FOUND+oe.GAME_COMPLETION+oe.PERFECT_SCORE;le(e),ae.value=e,setTimeout((()=>{alert(`Parabéns! Você encontrou todas as palavras com ${Y.value} pontos.`),re()}),500)}}else Y.value-=1,Z.value=`Palavra não encontrada: ${u}`,setTimeout((()=>{he()}),1e3)}())}function ue(e,a){if(2===ee.value.length){const[o,l]=ee.value;if(o.row===l.row&&e===o.row){const e=Math.min(o.col,l.col),t=Math.max(o.col,l.col);return a>=e&&a<=t}if(o.col===l.col&&a===o.col){const a=Math.min(o.row,l.row),t=Math.max(o.row,l.row);return e>=a&&e<=t}}return ee.value.some((o=>o.row===e&&o.col===a))}let ce=u({});function ve(e,a){return!0===ce[`${e}-${a}`]}async function de(e){if(await te(e)&&"hint"===e){const e=Q.value.filter((e=>!X.value.includes(e.word.toUpperCase())));if(e.length>0){(function(e){const a=[],o=["horizontal","vertical","diagonal-down","diagonal-up"];for(let l=0;l<D.value;l++)for(let t=0;t<R.value;t++)o.forEach((o=>{const n=pe(e,l,t,o);n.length===e.length&&a.push(...n)}));return a})(e[Math.floor(Math.random()*e.length)].word.toUpperCase()).forEach((e=>{const a=document.querySelector(`[data-row="${e.row}"][data-col="${e.col}"]`);a&&(a.classList.add("hint"),setTimeout((()=>a.classList.remove("hint")),1e3))}))}}}function pe(e,a,o,l){const t=[];for(let n=0;n<e.length;n++){let r=a,s=o;switch(l){case"horizontal":s+=n;break;case"vertical":r+=n;break;case"diagonal-down":r+=n,s+=n;break;case"diagonal-up":r-=n,s+=n}const i=K.value[r]?.[s];if(void 0===i||i!==e[n])return[];t.push({row:r,col:s})}return t}function he(){ee.value=[]}return c((()=>{re()})),(e,o)=>(C(),v("div",S,[o[3]||(o[3]=d("h1",null,"Caça-Palavras",-1)),p(a,{onSpecialtyChange:re,onDifficultyChange:re}),p(r,{availablePerks:["hint"],onPerkActivated:de}),d("div",P,[d("div",M,[d("ul",$,[(C(!0),v(g,null,f(Q.value,(e=>(C(),v("li",{key:e.word,title:e.word,class:b({found:X.value.includes(e.word.toUpperCase())})},[d("span",null,m(e.clue),1)],10,U)))),128))])]),d("div",I,[d("div",{class:"game-grid",ref_key:"gameGrid",ref:J,style:w(V.value)},[(C(!0),v(g,null,f(K.value,((e,a)=>(C(),v("div",{key:a,class:"grid-row"},[(C(!0),v(g,null,f(e,((e,o)=>(C(),v("div",{key:o,class:b(["cell",{selected:ue(a,o),found:ve(a,o)}]),onClick:e=>ie(a,o),"data-row":a,"data-col":o},m(e),11,z)))),128))])))),128))],4)])]),d("div",G,[d("div",j,[d("label",null,"Altura da grade: "+m(R.value),1),d("input",{type:"range",value:R.value,min:"10",max:"40",step:"1",onInput:q},null,40,x)]),d("div",_,[d("label",null,"Largura da grade: "+m(D.value),1),d("input",{type:"range",value:D.value,min:"8",max:"20",step:"1",onInput:B},null,40,T)]),d("div",A,[d("label",null,"Tamanho da célula: "+m(L.value),1),d("input",{type:"range",value:L.value,min:"16",max:"40",step:"2",onInput:H},null,40,E)])]),d("p",N,m(Z.value),1),ne.value?(C(),v("div",O,[o[1]||(o[1]=d("h3",null,"Parabéns!",-1)),o[2]||(o[2]=d("p",null,"Você encontrou todas as palavras!",-1)),d("p",null,"Pontos ganhos: "+m(ae.value),1),p(t,{variant:"primary",onClick:re},{default:k((()=>o[0]||(o[0]=[y("Novo Jogo")]))),_:1})])):h("",!0)]))}},[["__scopeId","data-v-3c94c4be"]]);export{W as default};
//# sourceMappingURL=WordSearchGame-Y-hQnqgQ.js.map
