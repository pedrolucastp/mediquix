import{u as e,G as a}from"./GameContainer-CGvjD8Zm.js";import{r as l,o as t,_ as u,c as o,w as r,a as s,b as n,d as i,e as v,f as c,g as d,h as m,t as p,F as f,i as w,n as g,j as k,k as h}from"./index-DycFYX5g.js";import{u as T}from"./SelectorsComponent-DHaawGjy.js";const b={class:"game-content"},y={key:0,class:"score-container"},C={class:"progress-bar"},_={class:"word-display"},x={class:"options-container"},P=["onClick","disabled"],I={key:0,class:"feedback-container"},S={key:0},q=u({__name:"QuickQuizGame",setup(u){const q=l(!1),G=l(0),R=l(10),j=l(10),A=l([]),L=l(!0),z=l(""),F=l(!1),N=l(!1),Q=l(""),U=l(!1),D=l(100),O=l(0),V=l(0),$=l(0),B=l(!1),E=l(!1),M=T(),{POINTS_CONFIG:W,awardPoints:H}=e(),{timeLeft:J,startTimer:K,pauseTimer:X,resetTimer:Y}=function(e={}){const{initialTime:a=60,tickRate:u=10,onTimeUp:o=()=>{},autoStart:r=!1}=e,s=l(a),n=l(a.toString());let i=null;function v(){c();let e=1e3*s.value;i=setInterval((()=>{e-=u,s.value=e/1e3,n.value=(e/1e3).toFixed(0),e<=0&&(c(),o())}),u)}function c(){i&&(clearInterval(i),i=null)}return r&&v(),t((()=>{c()})),{timeLeft:s,timerDisplay:n,startTimer:v,pauseTimer:function(){c()},resetTimer:function(){c(),s.value=a,n.value=a.toString()},clearTimer:c}}({initialTime:R.value,onTimeUp:()=>{F.value||(F.value=!0,E.value=!0,N.value=!1,Q.value="Tempo esgotado! A resposta correta era: "+Z.value.word)}}),Z=o((()=>A.value[G.value])),ee=o((()=>Z.value?le([...Z.value.options]):[])),ae=o((()=>A.value.length-G.value));function le(e){return e.sort((()=>Math.random()-.5))}function te(){G.value=0;const e=M.filteredWords;if(0===e.length)return alert("Nenhuma questão encontrada com os critérios selecionados."),void(L.value=!1);const a=le([...e]).slice(0,j.value);A.value=a.map((a=>({...a,options:ue(a,e)}))),L.value=!0,oe()}function ue(e,a){const l=[e.word],t=le(a.filter((a=>a.word!==e.word)).map((e=>e.word))).slice(0,3);return le([...l,...t])}function oe(){z.value="",F.value=!1,N.value=!1,Q.value="",U.value=G.value===A.value.length-1,D.value=100,E.value=!1,Y(),K()}function re(e){F.value||E.value||(z.value=e,X(),function(){if(!Z.value)return;F.value=!0,N.value=z.value.trim().toLowerCase()===Z.value.word.toLowerCase(),Q.value=N.value?"Resposta correta!":`Resposta incorreta! A resposta correta era: ${Z.value.word}`,N.value&&($.value++,O.value+=W.correctAnswer)}())}function se(){U.value?async function(){L.value=!1,B.value=!0;const e=$.value===A.value.length,a=function(e,a){let l=e*W.correctAnswer;a&&(l+=W.perfectGameBonus);return l}($.value,e);await H(a),V.value=a}():(G.value++,oe())}return r(J,(e=>{D.value=e/R.value*100})),r(R,(e=>{Y()})),s((()=>{te()})),n((()=>{})),(e,l)=>(v(),i(a,{title:"Quiz Rápido",gameInstructions:"Teste seus conhecimentos médicos neste quiz rápido! \nVocê terá um tempo limitado para responder cada questão. \nEscolha a palavra correta que corresponde à definição mostrada.\nUse perks para pular questões difíceis ou ganhar tempo extra.",loading:q.value,score:O.value,availablePerks:["skip","extra_time"],onSpecialtyChange:te,onDifficultyChange:te},{default:c((()=>[d("div",b,[Z.value?(v(),m(f,{key:1},[d("div",C,[d("div",{class:"timer",style:g({width:`${D.value}%`})},null,4)]),d("div",_,[d("h2",null,p(Z.value.clue),1)]),d("div",x,[(v(!0),m(f,null,k(ee.value,(e=>(v(),m("button",{key:e,class:h(["option-button",{selected:z.value===e,correct:F.value&&!E.value&&e===Z.value.word,incorrect:F.value&&!E.value&&z.value===e&&e!==Z.value.word,"timeout-correct":E.value&&e===Z.value.word,"timeout-incorrect":E.value&&e!==Z.value.word}]),onClick:a=>re(e),disabled:F.value||E.value},p(e),11,P)))),128))]),F.value||E.value?(v(),m("div",I,[d("p",{class:h({"feedback-correct":N.value,"feedback-incorrect":!N.value})},p(Q.value),3),N.value?(v(),m("p",S,"Pontos ganhos: "+p(V.value),1)):w("",!0),d("button",{class:"next-button",onClick:se},p(U.value?"Ver Resultados":"Próxima Palavra"),1)])):w("",!0)],64)):(v(),m("div",y,[d("p",null,"Total de pontos: "+p(O.value),1),d("p",null,"Palavras restantes: "+p(ae.value),1)]))])])),_:1},8,["loading","score"]))}},[["__scopeId","data-v-24c0e720"]]);export{q as default};
//# sourceMappingURL=QuickQuizGame-DkmvKRE7.js.map
