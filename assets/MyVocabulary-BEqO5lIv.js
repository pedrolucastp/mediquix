import{c as e,r as a,I as l,o as i,L as s,j as c,g as t,k as o,m as n,f as u,J as r,p as d,l as v,b as f,a as p,t as m,F as y,s as w,T as h,v as k,e as g,x as b,y as C,u as V}from"./vue-vendor-COnmh5Ey.js";import{u as A,S as D,s as _}from"./SelectorsComponent-Cw4VZ0c4.js";import{_ as x,u as S,a as z,b as O,B as T,c as U,d as j}from"./index-cXKaoF06.js";import"./firebase-B6Q9gzvC.js";import"./fontawesome-IKCYsCpo.js";const q={class:"vocab-header"},E={class:"search-word"},I={class:"filters"},L={class:"filter-buttons"},P={class:"actions"},M={class:"results-info"},F={class:"results-count"},N={class:"vocabulary-list"},J=["onClick"],B={class:"card-header"},K={class:"card-badges"},R={key:0,class:"card-details"},W={class:"clue"},Y={class:"specialties-tags"},G={class:"card-actions"},H={key:1,class:"edit-form"},Q={class:"specialties-select"},X={class:"specialties-grid"},Z=["onClick"],$={class:"edit-actions"},ee={class:"form-group"},ae={class:"difficulty-section"},le={class:"specialties-section"},ie={class:"specialties-grid"},se=["onClick"],ce={key:0,class:"word-preview"},te={class:"preview-card"},oe={class:"preview-clue"},ne={class:"preview-tags"},ue={class:"modal-actions"},re={key:0,class:"loading-overlay"},de={class:"loading-content"},ve={key:0,class:"batch-actions-bar"},fe={class:"selected-count"},pe=x({__name:"MyVocabulary",setup(x){const pe=S(),me=e((()=>pe.isDarkMode)),ye=A(),we=z(),he=a(!1),ke=a(!1),ge=a(""),be=a(!1),Ce=a(!1),Ve=a(!1),Ae=a(new Set),De=a([]),_e=a([]),xe=l({}),Se=a(!1),ze=a(""),Oe=a(!1),Te=a(!1);function Ue(){Oe.value=window.scrollY>300}function je(){window.scrollTo({top:0,behavior:"smooth"})}function qe(){Te.value=!Te.value}function Ee(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase()}i((()=>{window.addEventListener("scroll",Ue)})),s((()=>{window.removeEventListener("scroll",Ue)}));const Ie=e((()=>{const e={};return Le.value.forEach((a=>{const l=Ee(a.word);e[l]=(e[l]||0)+1})),e})),Le=e((()=>{let e=ye.words;if("all"!==we.selectedSpecialty){const a=parseInt(we.selectedSpecialty);e=e.filter((e=>e.specialties.includes(a)))}if("all"!==we.selectedDifficulty){const a=parseInt(we.selectedDifficulty);e=e.filter((e=>e.difficulty===a))}if(ke.value&&(e=e.filter((e=>e.isActive))),""!==ge.value.trim()){const a=ge.value.trim().toLowerCase();e=e.filter((e=>e.word.toLowerCase().includes(a)||e.clue.toLowerCase().includes(a)))}return e.sort(((e,a)=>e.word.localeCompare(a.word)))}));function Pe(e){const a=De.value.indexOf(e);-1===a?De.value.push(e):De.value.splice(a,1)}function Me(e){return De.value.includes(e)}function Fe(){he.value=!he.value}function Ne(){ke.value=!ke.value}function Je(){Ce.value=!1,be.value=!0}function Be(){be.value=!1}const Ke=l({word:"",clue:"",specialties:[],difficulty:null}),Re=l({word:null,clue:null,specialties:null,difficulty:null}),We=e((()=>!Object.values(Re).some((e=>null!==e)))),Ye=e((()=>Ke.word.trim()&&Ke.clue.trim()&&Ke.specialties.length>0&&Ke.difficulty));function Ge(e){switch(e){case"word":Re.word=Ke.word.trim()?null:"A palavra é obrigatória.";break;case"clue":Re.clue=Ke.clue.trim()?null:"A dica é obrigatória.";break;case"specialties":Re.specialties=Ke.specialties.length>0?null:"Selecione pelo menos uma especialidade.";break;case"difficulty":Re.difficulty=Ke.difficulty?null:"Selecione um nível de dificuldade."}}async function He(){if(Ge("word"),Ge("clue"),Ge("specialties"),Ge("difficulty"),We.value)try{Se.value=!0,ze.value="adding";if(ye.words.some((e=>Ee(e.word)===Ke.word.trim().toLowerCase()))&&!confirm("A palavra já existe. Deseja adicionar outra instância?"))return;const e={word:Ke.word.trim(),clue:Ke.clue.trim(),specialties:[...Ke.specialties],difficulty:Ke.difficulty,isActive:!0};ye.words.push(e),await _(ye.words),Be(),Ke.word="",Ke.clue="",Ke.specialties=[],Ke.difficulty=null}catch(e){alert("Ocorreu um erro ao adicionar a palavra. Tente novamente.")}finally{Se.value=!1,ze.value=""}else alert("Preencha todos os campos corretamente.")}function Qe(e){const a=_e.value.indexOf(e);-1!==a&&(_e.value.splice(a,1),delete xe[e])}function Xe(){}function Ze(e){return{1:"Fácil",2:"Média",3:"Difícil"}[e]||"Desconhecida"}function $e(e){return Ee(e.word)}const ea=[{value:1,label:"Fácil"},{value:2,label:"Média"},{value:3,label:"Difícil"}],aa=e((()=>{switch(ze.value){case"adding":return"Adicionando palavra...";case"editing":return"Salvando alterações...";case"toggling":return"Atualizando estado...";case"deleting":return"Excluindo palavras...";default:return"Carregando..."}}));function la(){Ve.value=!Ve.value,Ve.value||Ae.value.clear()}function ia(){Le.value.forEach((e=>{Ae.value.add(e)}))}function sa(){Ae.value.clear()}async function ca(){if(Ae.value.size)try{Se.value=!0,ze.value="toggling";for(const e of Ae.value)e.isActive=!0;await _(ye.words),Ae.value.clear()}catch(e){alert("Ocorreu um erro ao ativar as palavras. Tente novamente.")}finally{Se.value=!1,ze.value=""}}async function ta(){if(Ae.value.size)try{Se.value=!0,ze.value="toggling";for(const e of Ae.value)e.isActive=!1;await _(ye.words),Ae.value.clear()}catch(e){alert("Ocorreu um erro ao desativar as palavras. Tente novamente.")}finally{Se.value=!1,ze.value=""}}async function oa(){if(Ae.value.size&&confirm("Deseja realmente excluir todas as palavras selecionadas?"))try{Se.value=!0,ze.value="deleting",ye.words=ye.words.filter((e=>!Ae.value.has(e))),await _(ye.words),Ae.value.clear()}catch(e){alert("Ocorreu um erro ao excluir as palavras. Tente novamente.")}finally{Se.value=!1,ze.value=""}}return(e,a)=>{const l=v("font-awesome-icon");return g(),c("div",{class:d(["my-vocabulary",{dark:me.value}])},[t("div",q,[a[12]||(a[12]=t("h1",null,"Meu Vocabulário",-1)),t("div",E,[o(O,{modelValue:ge.value,"onUpdate:modelValue":a[0]||(a[0]=e=>ge.value=e),placeholder:"Buscar palavra ou definição...",icon:"search",onKeyup:r(Xe,["enter"])},null,8,["modelValue"])]),t("div",{class:"mobile-controls-toggle",onClick:qe},[a[8]||(a[8]=t("span",null,"Controles",-1)),o(l,{icon:Te.value?"chevron-up":"chevron-down",class:d(["arrow",{up:Te.value}])},null,8,["icon","class"])]),t("div",{class:d(["vocab-controls",{expanded:Te.value}])},[t("div",I,[t("div",L,[o(T,{variant:"primary",icon:"plus",onClick:Je},{default:f((()=>a[9]||(a[9]=[b(" Adicionar ")]))),_:1}),o(T,{variant:"outline",icon:ke.value?"eye":"eye-slash",onClick:Ne,class:d({active:ke.value,toggle:!0})},{default:f((()=>[b(m(ke.value?"Todos":"Apenas ativos"),1)])),_:1},8,["icon","class"]),o(T,{variant:"outline",icon:"highlighter",onClick:Fe,class:d({active:he.value})},{default:f((()=>[b(m(he.value?"Remover Destaque":"Destacar Duplicatas"),1)])),_:1},8,["class"])])]),t("div",P,[o(T,{variant:"outline",icon:"check-square",onClick:la,class:d({active:Ve.value})},{default:f((()=>[b(m(Ve.value?"Cancelar":"Selecionar Itens"),1)])),_:1},8,["class"]),Ve.value?(g(),p(T,{key:0,variant:"outline",icon:"check",onClick:ia},{default:f((()=>a[10]||(a[10]=[b(" Selecionar Todos ")]))),_:1})):n("",!0),Ve.value?(g(),p(T,{key:1,variant:"outline",icon:"times",onClick:sa},{default:f((()=>a[11]||(a[11]=[b(" Desselecionar Todos ")]))),_:1})):n("",!0)]),o(D)],2),t("div",M,[t("p",F,m(Le.value.length)+" termos encontrados",1)])]),t("div",N,[(g(!0),c(y,null,w(Le.value,((l,i)=>(g(),c("div",{key:l.word+i,class:d(["term-item",{duplicate:he.value&&Ie.value[$e(l)]>1,expanded:Me(i),selected:Ae.value.has(l)}]),onClick:e=>!_e.value.includes(i)&&Pe(i)},[t("div",B,[t("h2",null,m(l.word),1),t("div",K,[t("span",{class:d(["badge difficulty-badge","difficulty-"+l.difficulty])},m(Ze(l.difficulty)),3),t("span",{class:d(["badge active-badge",{"is-active":l.isActive}])},m(l.isActive?"Ativo":"Inativo"),3)])]),Me(i)?(g(),c("div",R,[t("p",W,m(l.clue),1),t("div",Y,[(g(!0),c(y,null,w(l.specialties,(e=>(g(),c("span",{key:e,class:"specialty-tag"},m(C(ye).specialties[e]),1)))),128))]),t("div",G,[o(T,{variant:"outline",icon:"edit",onClick:V((e=>function(e){_e.value.includes(e)?Qe(e):(Me(e)||Pe(e),_e.value.push(e),xe[e]=JSON.parse(JSON.stringify(Le.value[e])))}(i)),["stop"]),size:"sm"},null,8,["onClick"]),o(T,{variant:"outline",icon:"trash",onClick:V((a=>e.deleteWord(i)),["stop"]),size:"sm"},null,8,["onClick"]),o(T,{variant:"outline",icon:l.isActive?"eye":"eye-slash",onClick:V((e=>async function(e){try{Se.value=!0,ze.value="toggling",e.isActive=!e.isActive,await _(ye.words)}catch(a){e.isActive=!e.isActive,alert("Ocorreu um erro ao alterar o estado. Tente novamente.")}finally{Se.value=!1,ze.value=""}}(l)),["stop"]),size:"sm"},null,8,["icon","onClick"]),Ve.value?(g(),p(T,{key:0,variant:"outline",icon:"check-square",onClick:V((e=>function(e,a){a.stopPropagation(),Ae.value.has(e)?Ae.value.delete(e):Ae.value.add(e)}(l,e)),["stop"]),size:"sm",class:d({active:Ae.value.has(l)})},null,8,["onClick","class"])):n("",!0)])])):n("",!0),_e.value.includes(i)?(g(),c("div",H,[o(O,{modelValue:xe[i].word,"onUpdate:modelValue":e=>xe[i].word=e,label:"Palavra",required:""},null,8,["modelValue","onUpdate:modelValue"]),o(O,{modelValue:xe[i].clue,"onUpdate:modelValue":e=>xe[i].clue=e,label:"Dica",type:"textarea",required:""},null,8,["modelValue","onUpdate:modelValue"]),o(j,{modelValue:xe[i].difficulty,"onUpdate:modelValue":e=>xe[i].difficulty=e,options:ea,label:"Dificuldade",required:""},null,8,["modelValue","onUpdate:modelValue"]),t("div",Q,[a[13]||(a[13]=t("label",null,"Especialidades:",-1)),t("div",X,[(g(!0),c(y,null,w(C(ye).specialties,((e,a)=>(g(),c("button",{key:a,type:"button",class:d(["specialty-button",{selected:xe[i].specialties.includes(a)}]),onClick:e=>function(e,a){const l=xe[e].specialties.indexOf(a);-1===l?xe[e].specialties.push(a):xe[e].specialties.splice(l,1)}(i,a)},m(e),11,Z)))),128))])]),t("div",$,[o(T,{variant:"primary",icon:"save",onClick:e=>async function(e){const a=xe[e];if(a.word.trim()&&a.clue.trim()&&a.difficulty&&0!==a.specialties.length)try{Se.value=!0,ze.value="editing";const l=ye.words.findIndex((a=>a.word===Le.value[e].word));-1!==l&&(ye.words[l]={...a},await _(ye.words)),Qe(e)}catch(l){alert("Ocorreu um erro ao salvar as alterações. Tente novamente.")}finally{Se.value=!1,ze.value=""}else alert("Preencha todos os campos corretamente.")}(i)},{default:f((()=>a[14]||(a[14]=[b(" Salvar ")]))),_:2},1032,["onClick"]),o(T,{variant:"outline",icon:"times",onClick:e=>Qe(i)},{default:f((()=>a[15]||(a[15]=[b(" Cancelar ")]))),_:2},1032,["onClick"])])])):n("",!0)],10,J)))),128))]),o(U,{modelValue:be.value,"onUpdate:modelValue":a[7]||(a[7]=e=>be.value=e),title:"Adicionar Nova Palavra"},{default:f((()=>[t("form",{onSubmit:V(He,["prevent"]),class:"add-word-form"},[t("div",ee,[o(O,{modelValue:Ke.word,"onUpdate:modelValue":a[1]||(a[1]=e=>Ke.word=e),label:"Palavra",required:"",error:Re.word,onInput:a[2]||(a[2]=e=>Ge("word")),placeholder:"Digite a palavra médica"},null,8,["modelValue","error"]),o(O,{modelValue:Ke.clue,"onUpdate:modelValue":a[3]||(a[3]=e=>Ke.clue=e),label:"Dica",type:"textarea",required:"",error:Re.clue,onInput:a[4]||(a[4]=e=>Ge("clue")),placeholder:"Digite uma dica clara e concisa"},null,8,["modelValue","error"])]),t("div",ae,[o(j,{modelValue:Ke.difficulty,"onUpdate:modelValue":a[5]||(a[5]=e=>Ke.difficulty=e),options:ea,label:"Dificuldade",required:"",error:Re.difficulty,onChange:a[6]||(a[6]=e=>Ge("difficulty"))},null,8,["modelValue","error"]),a[16]||(a[16]=t("p",{class:"field-hint"},"Escolha o nível de dificuldade apropriado",-1))]),t("div",le,[a[17]||(a[17]=t("label",null,"Especialidades:",-1)),t("p",{class:d(["field-hint",{"error-text":Re.specialties}])}," Selecione uma ou mais especialidades relacionadas ",2),t("div",ie,[(g(!0),c(y,null,w(C(ye).specialties,((e,a)=>(g(),c("button",{key:a,type:"button",class:d(["specialty-button",{selected:Ke.specialties.includes(a),"with-error":Re.specialties}]),onClick:e=>function(e){const a=Ke.specialties.indexOf(e);-1===a?Ke.specialties.push(e):Ke.specialties.splice(a,1),Ge("specialties")}(a)},m(e),11,se)))),128))])]),Ye.value?(g(),c("div",ce,[a[18]||(a[18]=t("h4",null,"Pré-visualização",-1)),t("div",te,[t("h3",null,m(Ke.word),1),t("p",oe,m(Ke.clue),1),t("div",ne,[(g(!0),c(y,null,w(Ke.specialties,(e=>(g(),c("span",{key:e,class:"preview-tag"},m(C(ye).specialties[e]),1)))),128)),t("span",{class:d(["preview-difficulty","difficulty-"+Ke.difficulty])},m(Ze(Ke.difficulty)),3)])])])):n("",!0),t("div",ue,[o(T,{type:"submit",variant:"primary",icon:"plus",disabled:!We.value},{default:f((()=>a[19]||(a[19]=[b(" Adicionar ")]))),_:1},8,["disabled"]),o(T,{type:"button",variant:"outline",icon:"times",onClick:Be},{default:f((()=>a[20]||(a[20]=[b(" Cancelar ")]))),_:1})])],32)])),_:1},8,["modelValue"]),o(h,{name:"fade"},{default:f((()=>[Se.value?(g(),c("div",re,[t("div",de,[o(l,{icon:"circle-notch",size:"2x",class:"loading-spinner"}),t("p",null,m(aa.value),1)])])):n("",!0)])),_:1}),Ve.value&&Ae.value.size>0?(g(),c("div",ve,[t("div",fe,[o(l,{icon:"check-square"}),t("span",null,m(Ae.value.size)+" selecionados",1)]),o(T,{variant:"outline",icon:"check",onClick:ca},{default:f((()=>a[21]||(a[21]=[b(" Ativar Selecionados ")]))),_:1}),o(T,{variant:"outline",icon:"times",onClick:ta},{default:f((()=>a[22]||(a[22]=[b(" Desativar Selecionados ")]))),_:1}),o(T,{variant:"accent",icon:"trash",onClick:oa},{default:f((()=>a[23]||(a[23]=[b(" Excluir Selecionados ")]))),_:1})])):n("",!0),u(t("button",{onClick:je,class:"scroll-top-button",title:"Voltar ao topo"},[o(l,{icon:"arrow-up"})],512),[[k,Oe.value]])],2)}}},[["__scopeId","data-v-b82edd83"]]);export{pe as default};
//# sourceMappingURL=MyVocabulary-BEqO5lIv.js.map
