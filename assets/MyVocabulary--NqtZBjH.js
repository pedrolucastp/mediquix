import{_ as e,u as a,c as l,q as i,r as s,v as c,o as t,C as o,b as n,d as u,e as r,f as d,x as v,z as f,D as p,m,k as y,w,B as h,p as k,t as g,F as b,h as C,E as V,T as A,y as D,i as _,g as x,G as S,H as z,I as O}from"./index-Cj7dyIox.js";import{u as q,S as T,s as U}from"./SelectorsComponent-DC-sSRKM.js";const E={class:"vocab-header"},I={class:"search-word"},L={class:"filters"},P={class:"filter-buttons"},j={class:"actions"},M={class:"results-info"},F={class:"results-count"},N={class:"vocabulary-list"},B=["onClick"],J={class:"card-header"},G={class:"card-badges"},H={key:0,class:"card-details"},K={class:"clue"},R={class:"specialties-tags"},W={class:"card-actions"},Y={key:1,class:"edit-form"},Q={class:"specialties-select"},X={class:"specialties-grid"},Z=["onClick"],$={class:"edit-actions"},ee={class:"form-group"},ae={class:"difficulty-section"},le={class:"specialties-section"},ie={class:"specialties-grid"},se=["onClick"],ce={key:0,class:"word-preview"},te={class:"preview-card"},oe={class:"preview-clue"},ne={class:"preview-tags"},ue={class:"modal-actions"},re={key:0,class:"loading-overlay"},de={class:"loading-content"},ve={key:0,class:"batch-actions-bar"},fe={class:"selected-count"},pe=e({__name:"MyVocabulary",setup(e){const pe=a(),me=l((()=>pe.isDarkMode)),ye=q(),we=i(),he=s(!1),ke=s(!1),ge=s(""),be=s(!1),Ce=s(!1),Ve=s(!1),Ae=s(new Set),De=s([]),_e=s([]),xe=c({}),Se=s(!1),ze=s(""),Oe=s(!1),qe=s(!1);function Te(){Oe.value=window.scrollY>300}function Ue(){window.scrollTo({top:0,behavior:"smooth"})}function Ee(){qe.value=!qe.value}function Ie(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase()}t((()=>{window.addEventListener("scroll",Te)})),o((()=>{window.removeEventListener("scroll",Te)}));const Le=l((()=>{const e={};return Pe.value.forEach((a=>{const l=Ie(a.word);e[l]=(e[l]||0)+1})),e})),Pe=l((()=>{let e=ye.words;if("all"!==we.selectedSpecialty){const a=parseInt(we.selectedSpecialty);e=e.filter((e=>e.specialties.includes(a)))}if("all"!==we.selectedDifficulty){const a=parseInt(we.selectedDifficulty);e=e.filter((e=>e.difficulty===a))}if(ke.value&&(e=e.filter((e=>e.isActive))),""!==ge.value.trim()){const a=ge.value.trim().toLowerCase();e=e.filter((e=>e.word.toLowerCase().includes(a)||e.clue.toLowerCase().includes(a)))}return e.sort(((e,a)=>e.word.localeCompare(a.word)))}));function je(e){const a=De.value.indexOf(e);-1===a?De.value.push(e):De.value.splice(a,1)}function Me(e){return De.value.includes(e)}function Fe(){he.value=!he.value}function Ne(){ke.value=!ke.value}function Be(){Ce.value=!1,be.value=!0}function Je(){be.value=!1}const Ge=c({word:"",clue:"",specialties:[],difficulty:null}),He=c({word:null,clue:null,specialties:null,difficulty:null}),Ke=l((()=>!Object.values(He).some((e=>null!==e)))),Re=l((()=>Ge.word.trim()&&Ge.clue.trim()&&Ge.specialties.length>0&&Ge.difficulty));function We(e){switch(e){case"word":He.word=Ge.word.trim()?null:"A palavra é obrigatória.";break;case"clue":He.clue=Ge.clue.trim()?null:"A dica é obrigatória.";break;case"specialties":He.specialties=Ge.specialties.length>0?null:"Selecione pelo menos uma especialidade.";break;case"difficulty":He.difficulty=Ge.difficulty?null:"Selecione um nível de dificuldade."}}async function Ye(){if(We("word"),We("clue"),We("specialties"),We("difficulty"),Ke.value)try{Se.value=!0,ze.value="adding";if(ye.words.some((e=>Ie(e.word)===Ge.word.trim().toLowerCase()))&&!confirm("A palavra já existe. Deseja adicionar outra instância?"))return;const e={word:Ge.word.trim(),clue:Ge.clue.trim(),specialties:[...Ge.specialties],difficulty:Ge.difficulty,isActive:!0};ye.words.push(e),await U(ye.words),Je(),Ge.word="",Ge.clue="",Ge.specialties=[],Ge.difficulty=null}catch(e){alert("Ocorreu um erro ao adicionar a palavra. Tente novamente.")}finally{Se.value=!1,ze.value=""}else alert("Preencha todos os campos corretamente.")}function Qe(e){const a=_e.value.indexOf(e);-1!==a&&(_e.value.splice(a,1),delete xe[e])}function Xe(){}function Ze(e){return{1:"Fácil",2:"Média",3:"Difícil"}[e]||"Desconhecida"}function $e(e){return Ie(e.word)}const ea=[{value:1,label:"Fácil"},{value:2,label:"Média"},{value:3,label:"Difícil"}],aa=l((()=>{switch(ze.value){case"adding":return"Adicionando palavra...";case"editing":return"Salvando alterações...";case"toggling":return"Atualizando estado...";case"deleting":return"Excluindo palavras...";default:return"Carregando..."}}));function la(){Ve.value=!Ve.value,Ve.value||Ae.value.clear()}function ia(){Pe.value.forEach((e=>{Ae.value.add(e)}))}function sa(){Ae.value.clear()}async function ca(){if(Ae.value.size)try{Se.value=!0,ze.value="toggling";for(const e of Ae.value)e.isActive=!0;await U(ye.words),Ae.value.clear()}catch(e){alert("Ocorreu um erro ao ativar as palavras. Tente novamente.")}finally{Se.value=!1,ze.value=""}}async function ta(){if(Ae.value.size)try{Se.value=!0,ze.value="toggling";for(const e of Ae.value)e.isActive=!1;await U(ye.words),Ae.value.clear()}catch(e){alert("Ocorreu um erro ao desativar as palavras. Tente novamente.")}finally{Se.value=!1,ze.value=""}}async function oa(){if(Ae.value.size&&confirm("Deseja realmente excluir todas as palavras selecionadas?"))try{Se.value=!0,ze.value="deleting",ye.words=ye.words.filter((e=>!Ae.value.has(e))),await U(ye.words),Ae.value.clear()}catch(e){alert("Ocorreu um erro ao excluir as palavras. Tente novamente.")}finally{Se.value=!1,ze.value=""}}return(e,a)=>{const l=y("font-awesome-icon");return _(),n("div",{class:m(["my-vocabulary",{dark:me.value}])},[u("div",E,[a[12]||(a[12]=u("h1",null,"Meu Vocabulário",-1)),u("div",I,[r(p,{modelValue:ge.value,"onUpdate:modelValue":a[0]||(a[0]=e=>ge.value=e),placeholder:"Buscar palavra ou definição...",icon:"search",onKeyup:f(Xe,["enter"])},null,8,["modelValue"])]),u("div",{class:"mobile-controls-toggle",onClick:Ee},[a[8]||(a[8]=u("span",null,"Controles",-1)),r(l,{icon:qe.value?"chevron-up":"chevron-down",class:m(["arrow",{up:qe.value}])},null,8,["icon","class"])]),u("div",{class:m(["vocab-controls",{expanded:qe.value}])},[u("div",L,[u("div",P,[r(h,{variant:"primary",icon:"plus",onClick:Be},{default:w((()=>a[9]||(a[9]=[x(" Adicionar ")]))),_:1}),r(h,{variant:"outline",icon:ke.value?"eye":"eye-slash",onClick:Ne,class:m({active:ke.value,toggle:!0})},{default:w((()=>[x(g(ke.value?"Todos":"Apenas ativos"),1)])),_:1},8,["icon","class"]),r(h,{variant:"outline",icon:"highlighter",onClick:Fe,class:m({active:he.value})},{default:w((()=>[x(g(he.value?"Remover Destaque":"Destacar Duplicatas"),1)])),_:1},8,["class"])])]),u("div",j,[r(h,{variant:"outline",icon:"check-square",onClick:la,class:m({active:Ve.value})},{default:w((()=>[x(g(Ve.value?"Cancelar":"Selecionar Itens"),1)])),_:1},8,["class"]),Ve.value?(_(),k(h,{key:0,variant:"outline",icon:"check",onClick:ia},{default:w((()=>a[10]||(a[10]=[x(" Selecionar Todos ")]))),_:1})):d("",!0),Ve.value?(_(),k(h,{key:1,variant:"outline",icon:"times",onClick:sa},{default:w((()=>a[11]||(a[11]=[x(" Desselecionar Todos ")]))),_:1})):d("",!0)]),r(T)],2),u("div",M,[u("p",F,g(Pe.value.length)+" termos encontrados",1)])]),u("div",N,[(_(!0),n(b,null,C(Pe.value,((l,i)=>(_(),n("div",{key:l.word+i,class:m(["term-item",{duplicate:he.value&&Le.value[$e(l)]>1,expanded:Me(i),selected:Ae.value.has(l)}]),onClick:e=>!_e.value.includes(i)&&je(i)},[u("div",J,[u("h2",null,g(l.word),1),u("div",G,[u("span",{class:m(["badge difficulty-badge","difficulty-"+l.difficulty])},g(Ze(l.difficulty)),3),u("span",{class:m(["badge active-badge",{"is-active":l.isActive}])},g(l.isActive?"Ativo":"Inativo"),3)])]),Me(i)?(_(),n("div",H,[u("p",K,g(l.clue),1),u("div",R,[(_(!0),n(b,null,C(l.specialties,(e=>(_(),n("span",{key:e,class:"specialty-tag"},g(S(ye).specialties[e]),1)))),128))]),u("div",W,[r(h,{variant:"outline",icon:"edit",onClick:z((e=>function(e){_e.value.includes(e)?Qe(e):(Me(e)||je(e),_e.value.push(e),xe[e]=JSON.parse(JSON.stringify(Pe.value[e])))}(i)),["stop"]),size:"sm"},null,8,["onClick"]),r(h,{variant:"outline",icon:"trash",onClick:z((a=>e.deleteWord(i)),["stop"]),size:"sm"},null,8,["onClick"]),r(h,{variant:"outline",icon:l.isActive?"eye":"eye-slash",onClick:z((e=>async function(e){try{Se.value=!0,ze.value="toggling",e.isActive=!e.isActive,await U(ye.words)}catch(a){e.isActive=!e.isActive,alert("Ocorreu um erro ao alterar o estado. Tente novamente.")}finally{Se.value=!1,ze.value=""}}(l)),["stop"]),size:"sm"},null,8,["icon","onClick"]),Ve.value?(_(),k(h,{key:0,variant:"outline",icon:"check-square",onClick:z((e=>function(e,a){a.stopPropagation(),Ae.value.has(e)?Ae.value.delete(e):Ae.value.add(e)}(l,e)),["stop"]),size:"sm",class:m({active:Ae.value.has(l)})},null,8,["onClick","class"])):d("",!0)])])):d("",!0),_e.value.includes(i)?(_(),n("div",Y,[r(p,{modelValue:xe[i].word,"onUpdate:modelValue":e=>xe[i].word=e,label:"Palavra",required:""},null,8,["modelValue","onUpdate:modelValue"]),r(p,{modelValue:xe[i].clue,"onUpdate:modelValue":e=>xe[i].clue=e,label:"Dica",type:"textarea",required:""},null,8,["modelValue","onUpdate:modelValue"]),r(O,{modelValue:xe[i].difficulty,"onUpdate:modelValue":e=>xe[i].difficulty=e,options:ea,label:"Dificuldade",required:""},null,8,["modelValue","onUpdate:modelValue"]),u("div",Q,[a[13]||(a[13]=u("label",null,"Especialidades:",-1)),u("div",X,[(_(!0),n(b,null,C(S(ye).specialties,((e,a)=>(_(),n("button",{key:a,type:"button",class:m(["specialty-button",{selected:xe[i].specialties.includes(a)}]),onClick:e=>function(e,a){const l=xe[e].specialties.indexOf(a);-1===l?xe[e].specialties.push(a):xe[e].specialties.splice(l,1)}(i,a)},g(e),11,Z)))),128))])]),u("div",$,[r(h,{variant:"primary",icon:"save",onClick:e=>async function(e){const a=xe[e];if(a.word.trim()&&a.clue.trim()&&a.difficulty&&0!==a.specialties.length)try{Se.value=!0,ze.value="editing";const l=ye.words.findIndex((a=>a.word===Pe.value[e].word));-1!==l&&(ye.words[l]={...a},await U(ye.words)),Qe(e)}catch(l){alert("Ocorreu um erro ao salvar as alterações. Tente novamente.")}finally{Se.value=!1,ze.value=""}else alert("Preencha todos os campos corretamente.")}(i)},{default:w((()=>a[14]||(a[14]=[x(" Salvar ")]))),_:2},1032,["onClick"]),r(h,{variant:"outline",icon:"times",onClick:e=>Qe(i)},{default:w((()=>a[15]||(a[15]=[x(" Cancelar ")]))),_:2},1032,["onClick"])])])):d("",!0)],10,B)))),128))]),r(V,{modelValue:be.value,"onUpdate:modelValue":a[7]||(a[7]=e=>be.value=e),title:"Adicionar Nova Palavra"},{default:w((()=>[u("form",{onSubmit:z(Ye,["prevent"]),class:"add-word-form"},[u("div",ee,[r(p,{modelValue:Ge.word,"onUpdate:modelValue":a[1]||(a[1]=e=>Ge.word=e),label:"Palavra",required:"",error:He.word,onInput:a[2]||(a[2]=e=>We("word")),placeholder:"Digite a palavra médica"},null,8,["modelValue","error"]),r(p,{modelValue:Ge.clue,"onUpdate:modelValue":a[3]||(a[3]=e=>Ge.clue=e),label:"Dica",type:"textarea",required:"",error:He.clue,onInput:a[4]||(a[4]=e=>We("clue")),placeholder:"Digite uma dica clara e concisa"},null,8,["modelValue","error"])]),u("div",ae,[r(O,{modelValue:Ge.difficulty,"onUpdate:modelValue":a[5]||(a[5]=e=>Ge.difficulty=e),options:ea,label:"Dificuldade",required:"",error:He.difficulty,onChange:a[6]||(a[6]=e=>We("difficulty"))},null,8,["modelValue","error"]),a[16]||(a[16]=u("p",{class:"field-hint"},"Escolha o nível de dificuldade apropriado",-1))]),u("div",le,[a[17]||(a[17]=u("label",null,"Especialidades:",-1)),u("p",{class:m(["field-hint",{"error-text":He.specialties}])}," Selecione uma ou mais especialidades relacionadas ",2),u("div",ie,[(_(!0),n(b,null,C(S(ye).specialties,((e,a)=>(_(),n("button",{key:a,type:"button",class:m(["specialty-button",{selected:Ge.specialties.includes(a),"with-error":He.specialties}]),onClick:e=>function(e){const a=Ge.specialties.indexOf(e);-1===a?Ge.specialties.push(e):Ge.specialties.splice(a,1),We("specialties")}(a)},g(e),11,se)))),128))])]),Re.value?(_(),n("div",ce,[a[18]||(a[18]=u("h4",null,"Pré-visualização",-1)),u("div",te,[u("h3",null,g(Ge.word),1),u("p",oe,g(Ge.clue),1),u("div",ne,[(_(!0),n(b,null,C(Ge.specialties,(e=>(_(),n("span",{key:e,class:"preview-tag"},g(S(ye).specialties[e]),1)))),128)),u("span",{class:m(["preview-difficulty","difficulty-"+Ge.difficulty])},g(Ze(Ge.difficulty)),3)])])])):d("",!0),u("div",ue,[r(h,{type:"submit",variant:"primary",icon:"plus",disabled:!Ke.value},{default:w((()=>a[19]||(a[19]=[x(" Adicionar ")]))),_:1},8,["disabled"]),r(h,{type:"button",variant:"outline",icon:"times",onClick:Je},{default:w((()=>a[20]||(a[20]=[x(" Cancelar ")]))),_:1})])],32)])),_:1},8,["modelValue"]),r(A,{name:"fade"},{default:w((()=>[Se.value?(_(),n("div",re,[u("div",de,[r(l,{icon:"circle-notch",size:"2x",class:"loading-spinner"}),u("p",null,g(aa.value),1)])])):d("",!0)])),_:1}),Ve.value&&Ae.value.size>0?(_(),n("div",ve,[u("div",fe,[r(l,{icon:"check-square"}),u("span",null,g(Ae.value.size)+" selecionados",1)]),r(h,{variant:"outline",icon:"check",onClick:ca},{default:w((()=>a[21]||(a[21]=[x(" Ativar Selecionados ")]))),_:1}),r(h,{variant:"outline",icon:"times",onClick:ta},{default:w((()=>a[22]||(a[22]=[x(" Desativar Selecionados ")]))),_:1}),r(h,{variant:"accent",icon:"trash",onClick:oa},{default:w((()=>a[23]||(a[23]=[x(" Excluir Selecionados ")]))),_:1})])):d("",!0),v(u("button",{onClick:Ue,class:"scroll-top-button",title:"Voltar ao topo"},[r(l,{icon:"arrow-up"})],512),[[D,Oe.value]])],2)}}},[["__scopeId","data-v-b82edd83"]]);export{pe as default};
//# sourceMappingURL=MyVocabulary--NqtZBjH.js.map
