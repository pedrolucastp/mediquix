import{u as e,S as a}from"./SelectorsComponent-EX9bJPd6.js";import{u as l,G as u}from"./GamePerksMenu-C6MNeGd8.js";import{_ as n,r as t,c as o,o as i,a as v,b as s,d as r,e as c,f as d,g as f,t as m,F as p,h,w as k,B as g,i as y,n as b}from"./index-CSZaimd6.js";const w={class:"quiz"},C={key:0,id:"quiz-container"},P={id:"timer"},_={id:"time"},x={id:"question"},I={id:"options"},z=["disabled","onClick"],q={key:0,class:"completion-message"},G=n({__name:"QuickQuizGame",setup(n){const G=t(0),Q=t(7),j=t([]),S=t(!0),F=t([]),M=t("7"),N=t(!1),W=t(!1),A=t([]),B=t(!1),D=t(0),E=t(0);let J=null;const R=e(),{awardPoints:V,usePerk:H}=l(),K=o((()=>j.value[G.value]));function L(e){return e.sort((()=>Math.random()-.5))}function O(){if(clearInterval(J),G.value>=j.value.length)return alert("Você completou o quiz!"),void Z();W.value=!1,N.value=!1,A.value=[],K.value&&(F.value=function(e){const a=[e],l=R.filteredWords.filter((a=>a.word!==e)).map((e=>e.word));for(L(l);a.length<4&&l.length>0;)a.push(l.pop());return L(a)}(K.value.word),A.value=F.value.map((()=>"")),Q.value=7,M.value="7",function(){let e=1e3*Q.value;J=setInterval((()=>{e-=10,M.value=(e/1e3).toFixed(0),e<=0&&(clearInterval(J),T(null),W.value=!0,N.value=!0)}),10)}())}function T(e,a=null){if(clearInterval(J),!K.value)return;const l=K.value.word;null!==e&&(e===l&&null!==a?(A.value[a]="#2ecc71",E.value++):null!==a&&(A.value[a]="#e74c3c")),F.value.forEach(((a,u)=>{a===l&&(A.value[u]=null===e?"#ffd700":"#2ecc71")})),W.value=!0,N.value=!0}async function U(){G.value++,G.value>=j.value.length?await async function(){S.value=!1,B.value=!0;const e=E.value===j.value.length,a=calculateGamePoints(E.value,e);await V(a),D.value=a}():(Q.value=7,O())}async function X(e){await H(e)&&("skip"===e?U():"extra_time"===e&&(Q.value+=30))}function Y(){G.value=0;const e=R.filteredWords;if(0===e.length)return alert("Nenhuma questão encontrada com os critérios selecionados."),void(S.value=!1);j.value=L([...e]).slice(0,10),S.value=!0,Q.value=7,O()}function Z(){clearInterval(J),S.value=!1,B.value=!1,D.value=0,E.value=0,G.value=0,Y()}return i((()=>{Y()})),v((()=>{clearInterval(J)})),(e,l)=>{var n;return y(),s("div",w,[l[3]||(l[3]=r("h1",null,"Quiz Rápido",-1)),c(a,{onSpecialtyChange:Z,onDifficultyChange:Z}),c(u,{availablePerks:["skip","extra_time"],onPerkActivated:X}),r("div",null,[S.value?(y(),s("div",C,[r("div",P,[r("span",_,m(M.value),1),l[0]||(l[0]=f("s "))]),r("div",x,m(null==(n=K.value)?void 0:n.clue),1),r("ul",I,[(y(!0),s(p,null,h(F.value,((e,a)=>(y(),s("li",{key:a},[r("button",{disabled:W.value,style:b({backgroundColor:A.value[a]}),onClick:l=>T(e,a)},m(e),13,z)])))),128))]),N.value?(y(),s("button",{key:0,id:"next-button",onClick:U}," Próxima Pergunta ")):d("",!0)])):d("",!0)]),B.value?(y(),s("div",q,[l[2]||(l[2]=r("h3",null,"Quiz Completo!",-1)),r("p",null,"Pontos ganhos: "+m(D.value),1),c(g,{variant:"primary",onClick:Z},{default:k((()=>l[1]||(l[1]=[f("Jogar Novamente")]))),_:1})])):d("",!0)])}}},[["__scopeId","data-v-4b2f9eb5"]]);export{G as default};
//# sourceMappingURL=QuickQuizGame-DZ9L-WFv.js.map
