import{_ as e,K as a,u as s,r as l,o,O as d,p as u,w as r,E as t,P as n,i,b as v,f as c,e as m,D as f,B as h,g as p,d as w}from"./index-Cj7dyIox.js";const y={key:0,class:"reset-password-form"},P={key:0,class:"form-content"},V={key:1,class:"loading-state"},b=e({__name:"AuthAction",setup(e){n();const b=d(),g=a(),C=s(),_=l(!1),k=l(""),S=l(""),E=l(""),U=l(""),x=l(!1),A=l(!1);async function R(){if(E.value===U.value)try{x.value=!0,await g.confirmPasswordChange(S.value,E.value),C.setSuccess("resetPassword","Senha alterada com sucesso"),_.value=!1,b.push("/")}catch(e){C.setError("resetPassword",e.message)}finally{x.value=!1}else C.setError("resetPassword","As senhas não coincidem")}function L(){x.value||(_.value=!1,b.push("/"))}return o((async()=>{const e=new URLSearchParams(window.location.search);if(k.value=e.get("mode"),S.value=e.get("oobCode"),"resetPassword"===k.value&&S.value)try{x.value=!0,await g.verifyResetCode(S.value),A.value=!0,_.value=!0,window.history.replaceState({},document.title,"/")}catch(a){C.setError("resetPassword","Link inválido ou expirado. Por favor, solicite uma nova redefinição de senha."),b.push("/")}finally{x.value=!1}})),(e,a)=>(i(),u(t,{modelValue:_.value,"onUpdate:modelValue":a[2]||(a[2]=e=>_.value=e),title:"Redefinir Senha","show-close":!x.value,onClose:L},{default:r((()=>["resetPassword"===k.value?(i(),v("div",y,[A.value?(i(),v("div",P,[m(f,{modelValue:E.value,"onUpdate:modelValue":a[0]||(a[0]=e=>E.value=e),type:"password",placeholder:"Nova senha",disabled:x.value},null,8,["modelValue","disabled"]),m(f,{modelValue:U.value,"onUpdate:modelValue":a[1]||(a[1]=e=>U.value=e),type:"password",placeholder:"Confirme a nova senha",disabled:x.value},null,8,["modelValue","disabled"]),m(h,{onClick:R,loading:x.value,disabled:!E.value||!U.value||x.value},{default:r((()=>a[3]||(a[3]=[p(" Confirmar nova senha ")]))),_:1},8,["loading","disabled"])])):x.value?(i(),v("div",V,a[4]||(a[4]=[w("p",null,"Verificando...",-1)]))):c("",!0)])):c("",!0)])),_:1},8,["modelValue","show-close"]))}},[["__scopeId","data-v-fd7a80d3"]]);export{b as default};
//# sourceMappingURL=AuthAction-DiI8MQhU.js.map
