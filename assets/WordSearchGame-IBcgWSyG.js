import{u as a,S as e}from"./SelectorsComponent-Bgu7H60f.js";import{_ as l,q as o,c as t,r as n,v as r,o as s,b as i,d as u,e as c,f as v,F as d,h as p,n as h,t as g,w as f,B as w,i as m,m as C,g as k}from"./index-BMVwXuUE.js";import{u as y,G as b}from"./GamePerksMenu-gUZZWI2c.js";const S={class:"word-search-game"},P={class:"game-container"},M={class:"word-search-game-panel"},$={class:"word-list"},U=["title"],z={class:"game-grid-container"},G=["onClick","data-row","data-col"],I={class:"grid-controls"},_={class:"control-group"},x=["value"],T={class:"control-group"},A=["value"],E={class:"control-group"},j=["value"],N={class:"status"},O={key:0,class:"completion-message"},W=l({__name:"WordSearchGame",setup(l){const W=o(),F=a(),L=t((()=>W.settings.wordSearchGame.cellSize)),R=t((()=>W.settings.wordSearchGame.gridWidth)),D=t((()=>W.settings.wordSearchGame.gridHeight)),V=t((()=>({display:"grid",gridTemplateColumns:`repeat(${D.value}, ${L.value}px)`,gridTemplateRows:`repeat(${R.value}, ${L.value}px)`,"--cell-size":`${L.value}px`,width:"fit-content",minWidth:"min-content"})));function q(a){const e=parseInt(a.target.value);e>=10&&e<=40&&(W.setWordSearchGridSize(e,D.value,L.value),ra())}function B(a){const e=parseInt(a.target.value);e>=8&&e<=20&&(W.setWordSearchGridSize(R.value,e,L.value),ra())}function H(a){const e=parseInt(a.target.value);e>=16&&e<=40&&W.setWordSearchGridSize(R.value,D.value,e)}const J=n(null),K=n([]),Q=n([]),X=n([]),Y=n(0),Z=n(""),aa=n([]),ea=n(0),{POINTS_CONFIG:la,awardPoints:oa,usePerk:ta}=y(),na=t((()=>Q.value.length>0&&Q.value.every((a=>X.value.includes(a.word.toUpperCase())))));function ra(){Y.value=0,Z.value="",aa.value=[],X.value=[],ca=r({});const a=parseInt(D.value),e=parseInt(R.value);K.value=Array(a).fill().map((()=>Array(e).fill("")));let l=F.words.filter((a=>a.isActive));if(l=l.filter((a=>a.word.length<=R.value&&a.word.length<=D.value)),l.length<10)return void alert("Não há palavras suficientes para iniciar o jogo. Por favor, ajuste os filtros ou adicione mais palavras que caibam na grade.");const o=Array.from(new Set(l.map((a=>a.word.toUpperCase()))));if(o.length<10)return void alert("Não há palavras únicas suficientes para iniciar o jogo. Por favor, ajuste os filtros ou adicione mais palavras.");o.sort((()=>.5-Math.random()));const t=o.slice(0,10);Q.value=t.map((a=>l.find((e=>e.word.toUpperCase()===a)))),Q.value.every((a=>function(a){const e=["horizontal","vertical","diagonal-down","diagonal-up"].filter((e=>{const l=["horizontal","diagonal-down","diagonal-up"].includes(e),o=["vertical","diagonal-down"].includes(e),t="diagonal-up"===e;return!(l&&a.length>R.value)&&(!(o&&a.length>D.value)&&!(t&&a.length>D.value))}));if(0===e.length)return!1;const l=[];for(const o of e){const e=D.value-(["vertical","diagonal-down"].includes(o)?a.length:0),t="diagonal-up"===o?a.length-1:0,n=R.value-(["horizontal","diagonal-down","diagonal-up"].includes(o)?a.length:0);for(let r=t;r<e;r++)for(let e=0;e<n;e++){const t=sa(a,r,e,o);t.canPlace&&l.push({row:r,col:e,direction:o,intersections:t.intersections})}}if(l.sort(((a,e)=>e.intersections===a.intersections?Math.random()-.5:e.intersections-a.intersections)),l.length>0){const e=l[0];return function(a,e,l,o){for(let t=0;t<a.length;t++){let n=e,r=l;switch(o){case"horizontal":r+=t;break;case"vertical":n+=t;break;case"diagonal-down":n+=t,r+=t;break;case"diagonal-up":n-=t,r+=t}K.value[n][r]=a[t]}}(a,e.row,e.col,e.direction),!0}return!1}(a.word.toUpperCase())))?function(){const a="ABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let e=0;e<D.value;e++)for(let l=0;l<R.value;l++)""===K.value[e][l]&&(K.value[e][l]=a.charAt(Math.floor(Math.random()*a.length)))}():ra()}function sa(a,e,l,o){let t=!0,n=0;for(let r=0;r<a.length;r++){let s=e,i=l;switch(o){case"horizontal":i+=r;break;case"vertical":s+=r;break;case"diagonal-down":s+=r,i+=r;break;case"diagonal-up":s-=r,i+=r}const u=K.value[s][i];if(""!==u){if(u!==a[r]){t=!1;break}n++}}return{canPlace:t,intersections:n}}function ia(a,e){const l=`${a}-${e}`;aa.value.some((a=>a.key===l))?aa.value=aa.value.filter((a=>a.key!==l)):(aa.value.push({row:a,col:e,key:l}),2===aa.value.length&&function(){if(2!==aa.value.length)return;const[a,e]=aa.value,l=e.row-a.row,o=e.col-a.col,t=Math.abs(l)===Math.abs(o),n=0===l,r=0===o;if(!n&&!r&&!t)return Z.value="Selecione letras em linha reta (horizontal, vertical ou diagonal).",void ha();let s="",i=[];if(n){const[l,o]=a.col<e.col?[a,e]:[e,a];for(let a=l.col;a<=o.col;a++)s+=K.value[l.row][a],i.push({row:l.row,col:a})}else if(r){const[l,o]=a.row<e.row?[a,e]:[e,a];for(let a=l.row;a<=o.row;a++)s+=K.value[a][l.col],i.push({row:a,col:l.col})}else{const e=Math.abs(l),t=l/e,n=o/e;for(let l=0;l<=e;l++){const e=a.row+l*t,o=a.col+l*n;s+=K.value[e][o],i.push({row:e,col:o})}}const u=s.toUpperCase(),c=u.split("").reverse().join(""),v=Q.value.find((a=>a.word.toUpperCase()===u||a.word.toUpperCase()===c));if(v&&!X.value.includes(v.word.toUpperCase())){if(X.value.push(v.word.toUpperCase()),Y.value+=10,i.forEach((a=>{ca[`${a.row}-${a.col}`]=!0})),Z.value=`Você encontrou: ${v.word.toUpperCase()}`,ha(),X.value.length===Q.value.length){const a=Q.value.length*la.WORD_FOUND+la.GAME_COMPLETION+la.PERFECT_SCORE;oa(a),ea.value=a,setTimeout((()=>{alert(`Parabéns! Você encontrou todas as palavras com ${Y.value} pontos.`),ra()}),500)}}else Y.value-=1,Z.value=`Palavra não encontrada: ${u}`,setTimeout((()=>{ha()}),1e3)}())}function ua(a,e){if(2===aa.value.length){const[l,o]=aa.value;if(l.row===o.row&&a===l.row){const a=Math.min(l.col,o.col),t=Math.max(l.col,o.col);return e>=a&&e<=t}if(l.col===o.col&&e===l.col){const e=Math.min(l.row,o.row),t=Math.max(l.row,o.row);return a>=e&&a<=t}}return aa.value.some((l=>l.row===a&&l.col===e))}let ca=r({});function va(a,e){return!0===ca[`${a}-${e}`]}async function da(a){if(await ta(a)&&"hint"===a){const a=Q.value.filter((a=>!X.value.includes(a.word.toUpperCase())));if(a.length>0){(function(a){const e=[],l=["horizontal","vertical","diagonal-down","diagonal-up"];for(let o=0;o<D.value;o++)for(let t=0;t<R.value;t++)l.forEach((l=>{const n=pa(a,o,t,l);n.length===a.length&&e.push(...n)}));return e})(a[Math.floor(Math.random()*a.length)].word.toUpperCase()).forEach((a=>{const e=document.querySelector(`[data-row="${a.row}"][data-col="${a.col}"]`);e&&(e.classList.add("hint"),setTimeout((()=>e.classList.remove("hint")),1e3))}))}}}function pa(a,e,l,o){var t;const n=[];for(let r=0;r<a.length;r++){let s=e,i=l;switch(o){case"horizontal":i+=r;break;case"vertical":s+=r;break;case"diagonal-down":s+=r,i+=r;break;case"diagonal-up":s-=r,i+=r}const u=null==(t=K.value[s])?void 0:t[i];if(void 0===u||u!==a[r])return[];n.push({row:s,col:i})}return n}function ha(){aa.value=[]}return s((()=>{ra()})),(a,l)=>(m(),i("div",S,[l[3]||(l[3]=u("h1",null,"Caça-Palavras",-1)),c(e,{onSpecialtyChange:ra,onDifficultyChange:ra}),c(b,{availablePerks:["hint"],onPerkActivated:da}),u("div",P,[u("div",M,[u("ul",$,[(m(!0),i(d,null,p(Q.value,(a=>(m(),i("li",{key:a.word,title:a.word,class:C({found:X.value.includes(a.word.toUpperCase())})},[u("span",null,g(a.clue),1)],10,U)))),128))])]),u("div",z,[u("div",{class:"game-grid",ref_key:"gameGrid",ref:J,style:h(V.value)},[(m(!0),i(d,null,p(K.value,((a,e)=>(m(),i("div",{key:e,class:"grid-row"},[(m(!0),i(d,null,p(a,((a,l)=>(m(),i("div",{key:l,class:C(["cell",{selected:ua(e,l),found:va(e,l)}]),onClick:a=>ia(e,l),"data-row":e,"data-col":l},g(a),11,G)))),128))])))),128))],4)])]),u("div",I,[u("div",_,[u("label",null,"Altura da grade: "+g(R.value),1),u("input",{type:"range",value:R.value,min:"10",max:"40",step:"1",onInput:q},null,40,x)]),u("div",T,[u("label",null,"Largura da grade: "+g(D.value),1),u("input",{type:"range",value:D.value,min:"8",max:"20",step:"1",onInput:B},null,40,A)]),u("div",E,[u("label",null,"Tamanho da célula: "+g(L.value),1),u("input",{type:"range",value:L.value,min:"16",max:"40",step:"2",onInput:H},null,40,j)])]),u("p",N,g(Z.value),1),na.value?(m(),i("div",O,[l[1]||(l[1]=u("h3",null,"Parabéns!",-1)),l[2]||(l[2]=u("p",null,"Você encontrou todas as palavras!",-1)),u("p",null,"Pontos ganhos: "+g(ea.value),1),c(w,{variant:"primary",onClick:ra},{default:f((()=>l[0]||(l[0]=[k("Novo Jogo")]))),_:1})])):v("",!0)]))}},[["__scopeId","data-v-8c23cfe2"]]);export{W as default};
//# sourceMappingURL=WordSearchGame-IBcgWSyG.js.map
