import{J as a,_ as e,K as t,s,c as i,C as n,j as o,b as r,d as c,F as l,h as u,e as d,w as p,B as k,t as m,i as v}from"./index-BMVwXuUE.js";const P={hint:{id:"hint",name:"Dica",description:"Revela uma letra ou dica adicional",cost:5,icon:"lightbulb"},extra_time:{id:"extra_time",name:"Tempo Extra",description:"Adiciona 30 segundos ao tempo do jogo",cost:3,icon:"clock"},skip:{id:"skip",name:"Pular",description:"Pula para a próxima palavra/questão",cost:8,icon:"forward"}},h={WORD_FOUND:2,GAME_COMPLETION:10,PERFECT_SCORE:15,TIME_BONUS:5};function _(){const e=a();return{PERKS:P,POINTS_CONFIG:h,awardPoints:async function(a){try{return await e.addPoints(a,!0),!0}catch(t){return!1}},usePerk:async function(a){const t=P[a];if(!t)throw new Error("Invalid perk");try{return await e.usePoints(t.cost),!0}catch(s){return!1}},totalPoints:e.totalPoints}}const f={key:0,class:"perks-menu"},b={class:"perks-list"},y={class:"perk-info"},w={class:"perk-name"},E={class:"perk-cost"},T={class:"perk-tooltip"},O={key:1,class:"login-prompt"},x=e({__name:"GamePerksMenu",props:{availablePerks:{type:Array,default:()=>["hint","extra_time","skip"]}},emits:["perk-activated"],setup(e,{emit:h}){const x=e,C=h,{usePerk:g}=_(),A=a(),I=t(),D=s(new Set),F=i((()=>{const a=A.totalPoints;return x.availablePerks.map((e=>({...P[e],isDisabled:a<P[e].cost||D.value.has(e)}))).filter(Boolean)}));let N;n((()=>{N&&clearTimeout(N)}));const R=s(I.isAuthenticated);return o((()=>I.isAuthenticated),(a=>{R.value=a}),{flush:"post"}),(a,e)=>R.value?(v(),r("div",f,[c("div",b,[(v(!0),r(l,null,u(F.value,(a=>(v(),r("div",{key:a.id,class:"perk-item"},[d(k,{variant:D.value.value.has(a.id)?"accent":"outline",icon:a.icon,onClick:e=>async function(a){I.isAuthenticated&&!D.value.has(a)&&(N&&clearTimeout(N),N=setTimeout((async()=>{await g(a)&&(D.value.add(a),C("perk-activated",a),setTimeout((()=>{D.value.delete(a)}),5e3))}),300))}(a.id),disabled:a.isDisabled,class:"perk-button"},{default:p((()=>[c("div",y,[c("span",w,m(a.name),1),c("span",E,m(a.cost)+" pontos",1)])])),_:2},1032,["variant","icon","onClick","disabled"]),c("div",T,m(a.description),1)])))),128))])])):(v(),r("div",O,e[0]||(e[0]=[c("p",null,"Faça login para usar perks no jogo",-1)])))}},[["__scopeId","data-v-1b5c1401"]]);export{x as G,_ as u};
//# sourceMappingURL=GamePerksMenu-gUZZWI2c.js.map
