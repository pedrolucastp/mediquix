import{u as e,G as a}from"./GameContainer-D0YqVRhg.js";import{r as t,o as l,_ as o,c as u,w as s,a as r,b as n,d as i,e as v,f as c,g as d,h as p,t as m,F as f,i as g,n as w,j as h,k}from"./index-DueFXURZ.js";import{u as b}from"./SelectorsComponent-pV0XPKfh.js";import{u as T}from"./useGameState-DN0m8_Rc.js";const _={class:"game-content"},C={key:0,class:"score-container"},y={class:"progress-bar"},G={class:"word-display"},O={class:"options-container"},R=["onClick","disabled"],P={key:0,class:"feedback-container"},D={key:0},S=o({__name:"QuickQuizGame",setup(o){const S=t(!1),x=t(0),F=t(10),I=t(10),N=t([]),U=t(!0),L=t("");t([]);const j=t(0),E=t(!1),q=t(!1),W=t(""),z=t(!1),A=t(100),M=t(0),Q=t(0),V=t(!1),$=t(!1);t(!1),t("");const B=b(),{POINTS_CONFIG:H,awardPoints:J}=e(),{endGame:K,resetGame:X}=T(),{timeLeft:Y,startTimer:Z,pauseTimer:ee,resetTimer:ae}=function(e={}){const{initialTime:a=60,tickRate:o=10,onTimeUp:u=()=>{},autoStart:s=!1}=e,r=t(a),n=t(a.toString());let i=null;function v(){c();let e=1e3*r.value;i=setInterval((()=>{e-=o,r.value=e/1e3,n.value=(e/1e3).toFixed(0),e<=0&&(c(),u())}),o)}function c(){i&&(clearInterval(i),i=null)}return s&&v(),l((()=>{c()})),{timeLeft:r,timerDisplay:n,startTimer:v,pauseTimer:function(){c()},resetTimer:function(){c(),r.value=a,n.value=a.toString()},clearTimer:c}}({initialTime:F.value,onTimeUp:()=>{E.value||(E.value=!0,$.value=!0,q.value=!1,W.value="Tempo esgotado! A resposta correta era: "+te.value.word)}}),te=u((()=>N.value[x.value])),le=u((()=>te.value?ue([...te.value.options]):[])),oe=u((()=>N.value.length-x.value));function ue(e){return e.sort((()=>Math.random()-.5))}function se(){X(),x.value=0;const e=B.filteredWords;if(0===e.length)return alert("Nenhuma questão encontrada com os critérios selecionados."),void(U.value=!1);const a=ue([...e]).slice(0,I.value);N.value=a.map((a=>({...a,options:re(a,e)}))),U.value=!0,ne()}function re(e,a){const t=[e.word],l=ue(a.filter((a=>a.word!==e.word)).map((e=>e.word))).slice(0,3);return ue([...t,...l])}function ne(){L.value="",E.value=!1,q.value=!1,W.value="",z.value=x.value===N.value.length-1,A.value=100,$.value=!1,ae(),Z()}function ie(e){E.value||$.value||(L.value=e,ee(),function(){if(!te.value)return;E.value=!0,q.value=L.value.trim().toLowerCase()===te.value.word.toLowerCase(),W.value=q.value?"Resposta correta!":`Resposta incorreta! A resposta correta era: ${te.value.word}`,q.value?(Q.value++,j.value+=H.WORD_FOUND,M.value=H.WORD_FOUND):M.value=0}())}function ve(){z.value?async function(){U.value=!1,V.value=!0,K();try{const e=Q.value===N.value.length,a=function(e,a){let t=e*H.WORD_FOUND;a&&(t+=H.PERFECT_SCORE);return t+H.GAME_COMPLETION}(Q.value,e);await J(a),M.value=a}catch(e){alert("Você precisa estar logado para ganhar pontos!")}}():(x.value++,ne())}return s(Y,(e=>{A.value=e/F.value*100})),s(F,(e=>{ae()})),r((()=>{se()})),n((()=>{})),(e,t)=>(v(),i(a,{title:"Quiz Rápido",gameInstructions:"Responda as questões em tempo limitado!\n- Leia a pergunta e digite a resposta\n- Ganhe 2 pontos por resposta correta\n- Ganhe 10 pontos por completar o quiz\n- Ganhe 15 pontos de bônus por acertar todas\n- Use 'skip' (8 pts) para pular uma questão\n- Use 'extra_time' (3 pts) para +30 segundos",loading:S.value,score:j.value,availablePerks:["skip","extra_time"],onSpecialtyChange:se,onDifficultyChange:se},{default:c((()=>[d("div",_,[te.value?(v(),p(f,{key:1},[d("div",y,[d("div",{class:"timer",style:w({width:`${A.value}%`})},null,4)]),d("div",G,[d("h2",null,m(te.value.clue),1)]),d("div",O,[(v(!0),p(f,null,h(le.value,(e=>(v(),p("button",{key:e,class:k(["option-button",{selected:L.value===e,correct:E.value&&!$.value&&e===te.value.word,incorrect:E.value&&!$.value&&L.value===e&&e!==te.value.word,"timeout-correct":$.value&&e===te.value.word,"timeout-incorrect":$.value&&e!==te.value.word}]),onClick:a=>ie(e),disabled:E.value||$.value},m(e),11,R)))),128))]),E.value||$.value?(v(),p("div",P,[d("p",{class:k({"feedback-correct":q.value,"feedback-incorrect":!q.value})},m(W.value),3),q.value?(v(),p("p",D,"Pontos ganhos: "+m(M.value),1)):g("",!0),d("button",{class:"next-button",onClick:ve},m(z.value?"Ver Resultados":"Próxima Palavra"),1)])):g("",!0)],64)):(v(),p("div",C,[d("p",null,"Total de pontos: "+m(j.value),1),d("p",null,"Palavras restantes: "+m(oe.value),1)]))])])),_:1},8,["loading","score"]))}},[["__scopeId","data-v-7b8ab56e"]]);export{S as default};
//# sourceMappingURL=QuickQuizGame-XK8L0SPK.js.map
